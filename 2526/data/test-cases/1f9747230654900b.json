{"uid":"1f9747230654900b","name":"test_log_rotation","fullName":"tests.integration.high_availability.test_log_rotation#test_log_rotation","historyId":"9e999cdbfb33f46372fd11cce7bf58b9","time":{"start":1735003917878,"stop":1735003922894,"duration":5016},"description":"Test the log rotation of text files.\n\n    Run continuous writes to ensure that audit log plugin is loaded and active\n    when mysql-test-app runs start-continuous-writes (by logging into mysql).\n    ","descriptionHtml":"<p>Test the log rotation of text files.</p>\n<pre><code>Run continuous writes to ensure that audit log plugin is loaded and active\nwhen mysql-test-app runs start-continuous-writes (by logging into mysql).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: ❌ files other than log files exist []\nassert ('error.log' in [] or 'error.log' == 'audit.log'\n  - audit.log\n  + error.log)","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_log_rotation.py\", line 91, in test_log_rotation\n    assert (\nAssertionError: ❌ files other than log files exist []\nassert ('error.log' in [] or 'error.log' == 'audit.log'\n  - audit.log\n  + error.log)","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1735003716388,"stop":1735003716389,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1735003716389,"stop":1735003716389,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1735003716389,"stop":1735003716601,"duration":212},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster","time":{"start":1735003716601,"stop":1735003915835,"duration":199234},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1735003915835,"stop":1735003917877,"duration":2042},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1735003915835,"stop":1735003915835,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test the log rotation of text files.\n\n    Run continuous writes to ensure that audit log plugin is loaded and active\n    when mysql-test-app runs start-continuous-writes (by logging into mysql).\n    ","status":"failed","statusMessage":"AssertionError: ❌ files other than log files exist []\nassert ('error.log' in [] or 'error.log' == 'audit.log'\n  - audit.log\n  + error.log)","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_log_rotation.py\", line 91, in test_log_rotation\n    assert (\nAssertionError: ❌ files other than log files exist []\nassert ('error.log' in [] or 'error.log' == 'audit.log'\n  - audit.log\n  + error.log)","steps":[],"attachments":[{"uid":"a42665577e1dd749","name":"log","source":"a42665577e1dd749.txt","type":"text/plain","size":4343}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1735003922925,"stop":1735003923972,"duration":1047},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster::finalizer","time":{"start":1735003923972,"stop":1735003923972,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1735003923972,"stop":1735003923972,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1735003923973,"stop":1735003924305,"duration":332},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1735003924306,"stop":1735003924306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1735003924306,"stop":1735003924306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1735003924306,"stop":1735003924306,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_log_rotation"},{"name":"host","value":"fv-az566-614"},{"name":"thread","value":"13057-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_log_rotation"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"aa7bf7d24cb392df","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":92,"unknown":4,"total":100},"items":[{"uid":"a5554a9168a138ec","reportUrl":"../2521//#testresult/a5554a9168a138ec","status":"passed","time":{"start":1734917560746,"stop":1734917569968,"duration":9222}},{"uid":"3d9a4ff6169b059f","reportUrl":"../2520//#testresult/3d9a4ff6169b059f","status":"passed","time":{"start":1734831102792,"stop":1734831112315,"duration":9523}},{"uid":"9f2d638cd5949efb","reportUrl":"../2519//#testresult/9f2d638cd5949efb","status":"passed","time":{"start":1734744690934,"stop":1734744700264,"duration":9330}},{"uid":"7a47b5306dfffcb1","reportUrl":"../2518//#testresult/7a47b5306dfffcb1","status":"passed","time":{"start":1734658340558,"stop":1734658349736,"duration":9178}},{"uid":"311344ca1f8baf9c","reportUrl":"../2514//#testresult/311344ca1f8baf9c","status":"passed","time":{"start":1734571977152,"stop":1734571987734,"duration":10582}},{"uid":"346315a1bb99d1ea","reportUrl":"../2507//#testresult/346315a1bb99d1ea","status":"passed","time":{"start":1734399140708,"stop":1734399150133,"duration":9425}},{"uid":"1a9e244951d87b7","reportUrl":"../2506//#testresult/1a9e244951d87b7","status":"passed","time":{"start":1734312774778,"stop":1734312784882,"duration":10104}},{"uid":"d2919566ed702b59","reportUrl":"../2505//#testresult/d2919566ed702b59","status":"passed","time":{"start":1734226383007,"stop":1734226392427,"duration":9420}},{"uid":"b33d776a14d29d38","reportUrl":"../2504//#testresult/b33d776a14d29d38","status":"passed","time":{"start":1734139898357,"stop":1734139908709,"duration":10352}},{"uid":"da55d6fa45985cfb","reportUrl":"../2502//#testresult/da55d6fa45985cfb","status":"passed","time":{"start":1734053542989,"stop":1734053552780,"duration":9791}},{"uid":"680b750dfe65284f","reportUrl":"../2497//#testresult/680b750dfe65284f","status":"passed","time":{"start":1733967114650,"stop":1733967125227,"duration":10577}},{"uid":"d8efede446a3994d","reportUrl":"../2490//#testresult/d8efede446a3994d","status":"passed","time":{"start":1733880716454,"stop":1733880727093,"duration":10639}},{"uid":"26b315b0cb4af97b","reportUrl":"../2469//#testresult/26b315b0cb4af97b","status":"passed","time":{"start":1733189565666,"stop":1733189575301,"duration":9635}},{"uid":"cce77ba6af2799f3","reportUrl":"../2466//#testresult/cce77ba6af2799f3","status":"passed","time":{"start":1733103095722,"stop":1733103105076,"duration":9354}},{"uid":"fd104bc1e3252042","reportUrl":"../2465//#testresult/fd104bc1e3252042","status":"passed","time":{"start":1733016860649,"stop":1733016870279,"duration":9630}},{"uid":"72945c8aac4a1c1","reportUrl":"../2464//#testresult/72945c8aac4a1c1","status":"passed","time":{"start":1732930293890,"stop":1732930303296,"duration":9406}},{"uid":"ca349fa76965b37c","reportUrl":"../2462//#testresult/ca349fa76965b37c","status":"failed","statusDetails":"AssertionError: ❌ log file audit.log not rotated\nassert 'test audit content' not in 'test audit content\\n\\n'\n  'test audit content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test audit content\\n\\n'","time":{"start":1732843858708,"stop":1732843866926,"duration":8218}},{"uid":"a08c1d761037b95c","reportUrl":"../2456//#testresult/a08c1d761037b95c","status":"passed","time":{"start":1732757511779,"stop":1732757521779,"duration":10000}},{"uid":"502810838ebe3b79","reportUrl":"../2454//#testresult/502810838ebe3b79","status":"passed","time":{"start":1732671140741,"stop":1732671150214,"duration":9473}},{"uid":"988a62f318c18768","reportUrl":"../2449//#testresult/988a62f318c18768","status":"passed","time":{"start":1732584693549,"stop":1732584703139,"duration":9590}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"1f9747230654900b.json","parameterValues":[]}