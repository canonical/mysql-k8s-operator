{"uid":"9102e6c5ed7dda08","name":"test_deploy_latest","fullName":"tests.integration.high_availability.test_upgrade#test_deploy_latest","historyId":"4de377097c80900251c8c87ce650913d","time":{"start":1754358404138,"stop":1754358494142,"duration":90004},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"juju.errors.JujuUnitError: Unit in error: mysql-k8s/2","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_upgrade.py\", line 59, in test_deploy_latest\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP_NAME)\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 251, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3203, in wait_for_idle\n    _raise_for_status(errors, \"error\")\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3094, in _raise_for_status\n    raise error_type(\njuju.errors.JujuUnitError: Unit in error: mysql-k8s/2","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"ops_test","time":{"start":1754358403935,"stop":1754358404137,"duration":202},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1754358403935,"stop":1754358403935,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1754358403935,"stop":1754358403935,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1754358404137,"stop":1754358404138,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"juju.errors.JujuUnitError: Unit in error: mysql-k8s/2","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_upgrade.py\", line 59, in test_deploy_latest\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP_NAME)\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 251, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3203, in wait_for_idle\n    _raise_for_status(errors, \"error\")\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3094, in _raise_for_status\n    raise error_type(\njuju.errors.JujuUnitError: Unit in error: mysql-k8s/2","steps":[],"attachments":[{"uid":"e3fa332d26c79be5","name":"log","source":"e3fa332d26c79be5.txt","type":"text/plain","size":1850}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1754358494163,"stop":1754358494163,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1754358494182,"stop":1754358494894,"duration":712},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1754358494895,"stop":1754358494895,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1754358494895,"stop":1754358494895,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1754358494895,"stop":1754358494895,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade"},{"name":"host","value":"pkrvmjbmru5nbw0"},{"name":"thread","value":"18191-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"918c1d0de54dcf6a","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":30,"skipped":6,"passed":470,"unknown":14,"total":520},"items":[{"uid":"f3f3ebfd1c9f4876","reportUrl":"../3114//#testresult/f3f3ebfd1c9f4876","status":"passed","time":{"start":1754272190268,"stop":1754272398635,"duration":208367}},{"uid":"7bea2ed575907b45","reportUrl":"../3113//#testresult/7bea2ed575907b45","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mysql-k8s/0","time":{"start":1754185796143,"stop":1754185888479,"duration":92336}},{"uid":"ab49c0dac516fcfd","reportUrl":"../3112//#testresult/ab49c0dac516fcfd","status":"passed","time":{"start":1754099844211,"stop":1754100018182,"duration":173971}},{"uid":"e6c24147c7ee7db4","reportUrl":"../3105//#testresult/e6c24147c7ee7db4","status":"passed","time":{"start":1754012764402,"stop":1754012923863,"duration":159461}},{"uid":"3103c72fb0eff297","reportUrl":"../3100//#testresult/3103c72fb0eff297","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mysql-k8s/2","time":{"start":1753926478731,"stop":1753926606833,"duration":128102}},{"uid":"81aba3ac86711a47","reportUrl":"../3099//#testresult/81aba3ac86711a47","status":"passed","time":{"start":1753840184727,"stop":1753840353680,"duration":168953}},{"uid":"f1a651fd26fa534c","reportUrl":"../3092//#testresult/f1a651fd26fa534c","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: mysql-k8s/2","time":{"start":1753752876884,"stop":1753752966880,"duration":89996}},{"uid":"a05122bbf1abe38c","reportUrl":"../3090//#testresult/a05122bbf1abe38c","status":"passed","time":{"start":1753666287258,"stop":1753666603782,"duration":316524}},{"uid":"e7d67ff34888c982","reportUrl":"../3089//#testresult/e7d67ff34888c982","status":"passed","time":{"start":1753579805699,"stop":1753580118204,"duration":312505}},{"uid":"a89e006f4dc8b819","reportUrl":"../3088//#testresult/a89e006f4dc8b819","status":"passed","time":{"start":1753493403371,"stop":1753493673738,"duration":270367}},{"uid":"68ba293c65dad545","reportUrl":"../3086//#testresult/68ba293c65dad545","status":"passed","time":{"start":1753406902062,"stop":1753407224259,"duration":322197}},{"uid":"b29dfe1ed22bb0d8","reportUrl":"../3083//#testresult/b29dfe1ed22bb0d8","status":"passed","time":{"start":1753320535299,"stop":1753320831353,"duration":296054}},{"uid":"60e6f4aa5994a1e2","reportUrl":"../3080//#testresult/60e6f4aa5994a1e2","status":"passed","time":{"start":1753234115101,"stop":1753234457643,"duration":342542}},{"uid":"9c576942c3066faa","reportUrl":"../3072//#testresult/9c576942c3066faa","status":"unknown","time":{}},{"uid":"604b0c04b1337810","reportUrl":"../3071//#testresult/604b0c04b1337810","status":"unknown","time":{}},{"uid":"d7a8182e0e27fdce","reportUrl":"../3070//#testresult/d7a8182e0e27fdce","status":"passed","time":{"start":1752974977825,"stop":1752975273749,"duration":295924}},{"uid":"806f66d961ab2165","reportUrl":"../3069//#testresult/806f66d961ab2165","status":"passed","time":{"start":1752888527566,"stop":1752888896862,"duration":369296}},{"uid":"9b792feba9a4d6a8","reportUrl":"../3068//#testresult/9b792feba9a4d6a8","status":"passed","time":{"start":1752802126937,"stop":1752802473213,"duration":346276}},{"uid":"6d4ddbf8ec918bf6","reportUrl":"../3067//#testresult/6d4ddbf8ec918bf6","status":"passed","time":{"start":1752715707177,"stop":1752716057948,"duration":350771}},{"uid":"19af1a1222a0a87d","reportUrl":"../3066//#testresult/19af1a1222a0a87d","status":"passed","time":{"start":1752629365047,"stop":1752629615971,"duration":250924}}]},"tags":["asyncio","abort_on_fail"]},"source":"9102e6c5ed7dda08.json","parameterValues":[]}