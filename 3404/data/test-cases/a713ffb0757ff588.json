{"uid":"a713ffb0757ff588","name":"test_failover","fullName":"tests.integration.high_availability.test_async_replication#test_failover","historyId":"d680fcf1a4cbc016b398bf40c87184f1","time":{"start":1761830358677,"stop":1761830660066,"duration":301389},"description":"Test switchover on primary cluster fail.","descriptionHtml":"<p>Test switchover on primary cluster fail.</p>\n","status":"broken","statusMessage":"TimeoutError: timed out waiting for action, stderr:\nRunning operation 19 with 1 task\n  - task 20 on unit-db1-1\n\nWaiting for task 20...\nERROR timed out waiting for results from: unit db1/1","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 274, in test_failover\n    promotion_task = model_1.run(\n                     ^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1012, in run\n    raise TimeoutError(msg) from None\nTimeoutError: timed out waiting for action, stderr:\nRunning operation 19 with 1 task\n  - task 20 on unit-db1-1\n\nWaiting for task 20...\nERROR timed out waiting for results from: unit db1/1","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"juju","time":{"start":1761828503343,"stop":1761828503666,"duration":323},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1761828503666,"stop":1761828503909,"duration":243},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1761828503666,"stop":1761828503666,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1761830358677,"stop":1761830358677,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test switchover on primary cluster fail.","status":"broken","statusMessage":"TimeoutError: timed out waiting for action, stderr:\nRunning operation 19 with 1 task\n  - task 20 on unit-db1-1\n\nWaiting for task 20...\nERROR timed out waiting for results from: unit db1/1","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 274, in test_failover\n    promotion_task = model_1.run(\n                     ^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1012, in run\n    raise TimeoutError(msg) from None\nTimeoutError: timed out waiting for action, stderr:\nRunning operation 19 with 1 task\n  - task 20 on unit-db1-1\n\nWaiting for task 20...\nERROR timed out waiting for results from: unit db1/1","steps":[],"attachments":[{"uid":"e828207f478d7470","name":"log","source":"e828207f478d7470.txt","type":"text/plain","size":688}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1761830660067,"stop":1761830660067,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::0","time":{"start":1761831570443,"stop":1761831693629,"duration":123186},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model::0","time":{"start":1761831693629,"stop":1761831693630,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1761831693630,"stop":1761831693928,"duration":298},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"19038-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"202cc4f110029c74","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":3,"skipped":71,"passed":434,"unknown":20,"total":528},"items":[{"uid":"657c48eb6f4c0441","reportUrl":"../3393//#testresult/657c48eb6f4c0441","status":"passed","time":{"start":1761702643775,"stop":1761702939954,"duration":296179}},{"uid":"139d7873bef8bfc0","reportUrl":"../3382//#testresult/139d7873bef8bfc0","status":"passed","time":{"start":1761616734551,"stop":1761617036760,"duration":302209}},{"uid":"99b35db635bfbab7","reportUrl":"../3374//#testresult/99b35db635bfbab7","status":"passed","time":{"start":1761531246540,"stop":1761531546712,"duration":300172}},{"uid":"2a2ecf26b14ff62c","reportUrl":"../3373//#testresult/2a2ecf26b14ff62c","status":"passed","time":{"start":1761444127177,"stop":1761444575840,"duration":448663}},{"uid":"914dc3917dfea2df","reportUrl":"../3372//#testresult/914dc3917dfea2df","status":"passed","time":{"start":1761357428852,"stop":1761357850529,"duration":421677}},{"uid":"8650a1d2dc2f35ce","reportUrl":"../3364//#testresult/8650a1d2dc2f35ce","status":"passed","time":{"start":1761271351879,"stop":1761271650032,"duration":298153}},{"uid":"80a6b468409add4","reportUrl":"../3358//#testresult/80a6b468409add4","status":"passed","time":{"start":1761184300609,"stop":1761184602738,"duration":302129}},{"uid":"8a89d74165af1c57","reportUrl":"../3355//#testresult/8a89d74165af1c57","status":"passed","time":{"start":1761104354077,"stop":1761104653216,"duration":299139}},{"uid":"b49ea52477a1ee58","reportUrl":"../3351//#testresult/b49ea52477a1ee58","status":"passed","time":{"start":1761012176368,"stop":1761012474506,"duration":298138}},{"uid":"750dc7a5851c8d8d","reportUrl":"../3344//#testresult/750dc7a5851c8d8d","status":"passed","time":{"start":1760926400992,"stop":1760926698874,"duration":297882}},{"uid":"b9806d276db4b6f2","reportUrl":"../3343//#testresult/b9806d276db4b6f2","status":"passed","time":{"start":1760838426389,"stop":1760838722829,"duration":296440}},{"uid":"c9259e69f6fc3708","reportUrl":"../3342//#testresult/c9259e69f6fc3708","status":"passed","time":{"start":1760777534955,"stop":1760777961394,"duration":426439}},{"uid":"70bf9f9d9674869e","reportUrl":"../3338//#testresult/70bf9f9d9674869e","status":"passed","time":{"start":1760685025250,"stop":1760685325335,"duration":300085}},{"uid":"66dc3c43d563aa2d","reportUrl":"../3336//#testresult/66dc3c43d563aa2d","status":"passed","time":{"start":1760580503201,"stop":1760580951657,"duration":448456}},{"uid":"ca34bc6ef0090e6a","reportUrl":"../3334//#testresult/ca34bc6ef0090e6a","status":"passed","time":{"start":1760493415495,"stop":1760493709655,"duration":294160}},{"uid":"ce5a5180a8f803be","reportUrl":"../3327//#testresult/ce5a5180a8f803be","status":"passed","time":{"start":1760407788706,"stop":1760408110904,"duration":322198}},{"uid":"8a4b814d1d9c0735","reportUrl":"../3326//#testresult/8a4b814d1d9c0735","status":"passed","time":{"start":1760321409771,"stop":1760321703248,"duration":293477}},{"uid":"c534d24300a7f7af","reportUrl":"../3325//#testresult/c534d24300a7f7af","status":"passed","time":{"start":1760237058967,"stop":1760237357947,"duration":298980}},{"uid":"e7dc4d2d13ffef5a","reportUrl":"../3324//#testresult/e7dc4d2d13ffef5a","status":"passed","time":{"start":1760147388718,"stop":1760147826968,"duration":438250}},{"uid":"c4b4e9f40341482c","reportUrl":"../3323//#testresult/c4b4e9f40341482c","status":"passed","time":{"start":1760061979671,"stop":1760062276431,"duration":296760}}]},"tags":["abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')"]},"source":"a713ffb0757ff588.json","parameterValues":[]}