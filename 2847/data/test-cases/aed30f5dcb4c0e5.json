{"uid":"aed30f5dcb4c0e5","name":"test_create_replication","fullName":"tests.integration.high_availability.test_async_replication#test_create_replication","historyId":"581ebb01823861b11b1ec6ccbecf1fb4","time":{"start":1741916073442,"stop":1741916377699,"duration":304257},"description":"Run the create replication and wait for the applications to settle.","descriptionHtml":"<p>Run the create replication and wait for the applications to settle.</p>\n","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\ndb2/0 [idle] waiting: waiting to join the cluster\n  db2/1 [idle] waiting: waiting to join the cluster\n  db2/2 [idle] waiting: Waiting for recovery to complete on other units","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 205, in test_create_replication\n    await gather(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\ndb2/0 [idle] waiting: waiting to join the cluster\n  db2/1 [idle] waiting: waiting to join the cluster\n  db2/2 [idle] waiting: Waiting for recovery to complete on other units","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1741915785035,"stop":1741915785036,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1741915785036,"stop":1741915785256,"duration":220},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1741915785036,"stop":1741915785036,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1741915785256,"stop":1741915785256,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1741915785257,"stop":1741915786033,"duration":776},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1741916073442,"stop":1741916073442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Run the create replication and wait for the applications to settle.","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\ndb2/0 [idle] waiting: waiting to join the cluster\n  db2/1 [idle] waiting: waiting to join the cluster\n  db2/2 [idle] waiting: Waiting for recovery to complete on other units","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 205, in test_create_replication\n    await gather(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\ndb2/0 [idle] waiting: waiting to join the cluster\n  db2/1 [idle] waiting: waiting to join the cluster\n  db2/2 [idle] waiting: Waiting for recovery to complete on other units","steps":[],"attachments":[{"uid":"467eac76eb5dbd0c","name":"log","source":"467eac76eb5dbd0c.txt","type":"text/plain","size":3057}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1741916377707,"stop":1741916377707,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1741916377733,"stop":1741916377754,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1741916377755,"stop":1741916378848,"duration":1093},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1741916378849,"stop":1741916378849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1741916378849,"stop":1741916378849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1741916378850,"stop":1741916378850,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1931-401"},{"name":"thread","value":"17788-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"387ce0f62720f199","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":5,"skipped":32,"passed":214,"unknown":6,"total":257},"items":[{"uid":"206c87ec8550c719","reportUrl":"../2846//#testresult/206c87ec8550c719","status":"passed","time":{"start":1741829630358,"stop":1741829839836,"duration":209478}},{"uid":"973352dea3827b11","reportUrl":"../2844//#testresult/973352dea3827b11","status":"passed","time":{"start":1741743224404,"stop":1741743399919,"duration":175515}},{"uid":"e678819bbcba0bb2","reportUrl":"../2839//#testresult/e678819bbcba0bb2","status":"unknown","time":{}},{"uid":"1c1bbbd39d40089b","reportUrl":"../2838//#testresult/1c1bbbd39d40089b","status":"passed","time":{"start":1741570348088,"stop":1741570521320,"duration":173232}},{"uid":"3d1f3d402b5dfe89","reportUrl":"../2837//#testresult/3d1f3d402b5dfe89","status":"passed","time":{"start":1741483905577,"stop":1741484060131,"duration":154554}},{"uid":"8c4d2a1e12697d23","reportUrl":"../2836//#testresult/8c4d2a1e12697d23","status":"passed","time":{"start":1741397565702,"stop":1741397693153,"duration":127451}},{"uid":"6824cb23b75ad98e","reportUrl":"../2834//#testresult/6824cb23b75ad98e","status":"passed","time":{"start":1741311187441,"stop":1741311299159,"duration":111718}},{"uid":"dff5fc8bf6ae709","reportUrl":"../2832//#testresult/dff5fc8bf6ae709","status":"passed","time":{"start":1741224782267,"stop":1741224981408,"duration":199141}},{"uid":"372ce106da6c07c1","reportUrl":"../2831//#testresult/372ce106da6c07c1","status":"passed","time":{"start":1741138425924,"stop":1741138640823,"duration":214899}},{"uid":"8eb12e21f5800134","reportUrl":"../2827//#testresult/8eb12e21f5800134","status":"passed","time":{"start":1741052049762,"stop":1741052181609,"duration":131847}},{"uid":"41ba0b932d370a63","reportUrl":"../2824//#testresult/41ba0b932d370a63","status":"passed","time":{"start":1740965608741,"stop":1740965737407,"duration":128666}},{"uid":"ef4c81d17d4d633d","reportUrl":"../2823//#testresult/ef4c81d17d4d633d","status":"passed","time":{"start":1740879245049,"stop":1740879381415,"duration":136366}},{"uid":"71c408db20f97d87","reportUrl":"../2822//#testresult/71c408db20f97d87","status":"passed","time":{"start":1740792826076,"stop":1740792944224,"duration":118148}},{"uid":"f1ebc62054f9d5a3","reportUrl":"../2820//#testresult/f1ebc62054f9d5a3","status":"passed","time":{"start":1740706406085,"stop":1740706585605,"duration":179520}},{"uid":"2665db8fc12f0ab3","reportUrl":"../2816//#testresult/2665db8fc12f0ab3","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\ndb2/0 [idle] waiting: waiting to join the cluster\n  db2/1 [idle] waiting: Waiting for recovery to complete on other units\n  db2/2 [idle] waiting: waiting to join the cluster","time":{"start":1740620028493,"stop":1740620331931,"duration":303438}},{"uid":"6604e333ce934e00","reportUrl":"../2814//#testresult/6604e333ce934e00","status":"passed","time":{"start":1740533627493,"stop":1740533788979,"duration":161486}},{"uid":"c742550d372fc817","reportUrl":"../2809//#testresult/c742550d372fc817","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\ndb2/0 [idle] waiting: waiting to join the cluster\n  db2/1 [idle] waiting: waiting to join the cluster\n  db2/2 [idle] waiting: Waiting for recovery to complete on other units","time":{"start":1740447233354,"stop":1740447536879,"duration":303525}},{"uid":"59b8d9be6c17ac7d","reportUrl":"../2805//#testresult/59b8d9be6c17ac7d","status":"passed","time":{"start":1740360786396,"stop":1740360930052,"duration":143656}},{"uid":"b0fa76f136146fe7","reportUrl":"../2804//#testresult/b0fa76f136146fe7","status":"passed","time":{"start":1740274448416,"stop":1740274640402,"duration":191986}},{"uid":"d43f0e685c5000ad","reportUrl":"../2803//#testresult/d43f0e685c5000ad","status":"passed","time":{"start":1740187945627,"stop":1740188120103,"duration":174476}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')"]},"source":"aed30f5dcb4c0e5.json","parameterValues":[]}