{"uid":"2644cdb053b2226d","name":"test_build_and_deploy_aws","fullName":"tests.integration.integration.test_backup_pitr_aws#test_build_and_deploy_aws","historyId":"ba3e2d7dd037905ea9c0ae891b5d6875","time":{"start":1769047107522,"stop":1769047178163,"duration":70641},"description":"Build and deploy for AWS.","descriptionHtml":"<p>Build and deploy for AWS.</p>\n","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/test_backup_pitr_aws.py\", line 15, in test_build_and_deploy_aws\n    build_and_deploy_operations(juju, charm, cloud_configs_aws[0], cloud_configs_aws[1])\n  File \"/root/spread_project/tests/integration/integration/helpers_backups.py\", line 86, in build_and_deploy_operations\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"cloud_configs_aws","time":{"start":1769047107219,"stop":1769047107219,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm","time":{"start":1769047107219,"stop":1769047107219,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1769047107219,"stop":1769047107521,"duration":302},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1769047107522,"stop":1769047107522,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Build and deploy for AWS.","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/test_backup_pitr_aws.py\", line 15, in test_build_and_deploy_aws\n    build_and_deploy_operations(juju, charm, cloud_configs_aws[0], cloud_configs_aws[1])\n  File \"/root/spread_project/tests/integration/integration/helpers_backups.py\", line 86, in build_and_deploy_operations\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","steps":[],"attachments":[{"uid":"ad910ddcb30c3078","name":"log","source":"ad910ddcb30c3078.txt","type":"text/plain","size":760}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1769047178170,"stop":1769047178170,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1769047209069,"stop":1769047209413,"duration":344},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration.integration"},{"name":"suite","value":"test_backup_pitr_aws"},{"name":"host","value":"runnervmmtnos"},{"name":"thread","value":"18732-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.integration.test_backup_pitr_aws"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"955994e1dca4ad76","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":41,"unknown":0,"total":43},"items":[{"uid":"2accb5339c3490b9","reportUrl":"../70//#testresult/2accb5339c3490b9","status":"broken","statusDetails":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","time":{"start":1768961380892,"stop":1768961421515,"duration":40623}},{"uid":"d841dfae7f766ad","reportUrl":"../69//#testresult/d841dfae7f766ad","status":"passed","time":{"start":1768874225863,"stop":1768874420389,"duration":194526}},{"uid":"7fb0134a6bf7cf8a","reportUrl":"../68//#testresult/7fb0134a6bf7cf8a","status":"passed","time":{"start":1768786747999,"stop":1768786910332,"duration":162333}},{"uid":"13747325b3e98089","reportUrl":"../67//#testresult/13747325b3e98089","status":"passed","time":{"start":1768700433642,"stop":1768700593447,"duration":159805}},{"uid":"855d43ffc1a2f31d","reportUrl":"../65//#testresult/855d43ffc1a2f31d","status":"passed","time":{"start":1768528033089,"stop":1768528206299,"duration":173210}},{"uid":"7db5758c9ad6bd46","reportUrl":"../64//#testresult/7db5758c9ad6bd46","status":"passed","time":{"start":1768443530671,"stop":1768443681709,"duration":151038}},{"uid":"df03212fc162d64c","reportUrl":"../63//#testresult/df03212fc162d64c","status":"passed","time":{"start":1768356590581,"stop":1768356740988,"duration":150407}},{"uid":"ffb8e27a3a2643","reportUrl":"../61//#testresult/ffb8e27a3a2643","status":"passed","time":{"start":1768182149967,"stop":1768182305022,"duration":155055}},{"uid":"4d01eec0eef96080","reportUrl":"../60//#testresult/4d01eec0eef96080","status":"passed","time":{"start":1768095855200,"stop":1768096012719,"duration":157519}},{"uid":"9db8b0fdf8090d15","reportUrl":"../59//#testresult/9db8b0fdf8090d15","status":"passed","time":{"start":1768010463326,"stop":1768010632505,"duration":169179}},{"uid":"a2a80b04ce602cf9","reportUrl":"../58//#testresult/a2a80b04ce602cf9","status":"passed","time":{"start":1767923502980,"stop":1767923672285,"duration":169305}},{"uid":"6c3f893889242840","reportUrl":"../56//#testresult/6c3f893889242840","status":"passed","time":{"start":1767750880950,"stop":1767751136837,"duration":255887}},{"uid":"9f1a8aa3ea6737cc","reportUrl":"../55//#testresult/9f1a8aa3ea6737cc","status":"passed","time":{"start":1767663651592,"stop":1767663884291,"duration":232699}},{"uid":"e37179bc467d56e2","reportUrl":"../54//#testresult/e37179bc467d56e2","status":"passed","time":{"start":1767578253726,"stop":1767578503529,"duration":249803}},{"uid":"c4c3f318c2856f2d","reportUrl":"../53//#testresult/c4c3f318c2856f2d","status":"passed","time":{"start":1767491988548,"stop":1767492223047,"duration":234499}},{"uid":"efc70727bc70482e","reportUrl":"../52//#testresult/efc70727bc70482e","status":"passed","time":{"start":1767404452992,"stop":1767404696110,"duration":243118}},{"uid":"73a3af39a3ac0f3","reportUrl":"../51//#testresult/73a3af39a3ac0f3","status":"passed","time":{"start":1767318156535,"stop":1767318377081,"duration":220546}},{"uid":"53e0ed55858508db","reportUrl":"../50//#testresult/53e0ed55858508db","status":"passed","time":{"start":1767231877797,"stop":1767232097257,"duration":219460}},{"uid":"e3a305889036342a","reportUrl":"../49//#testresult/e3a305889036342a","status":"passed","time":{"start":1767145388586,"stop":1767145603516,"duration":214930}},{"uid":"5c2c51d236c9b3c3","reportUrl":"../48//#testresult/5c2c51d236c9b3c3","status":"passed","time":{"start":1767058899072,"stop":1767059117349,"duration":218277}}]},"tags":["abort_on_fail"]},"source":"2644cdb053b2226d.json","parameterValues":[]}