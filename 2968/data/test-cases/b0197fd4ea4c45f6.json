{"uid":"b0197fd4ea4c45f6","name":"test_graceful_full_cluster_crash_test","fullName":"tests.integration.high_availability.test_self_healing_stop_all#test_graceful_full_cluster_crash_test","historyId":"7d02ac8c8300bc817c84cf65fe597430","time":{"start":1748223141324,"stop":1748223492578,"duration":351254},"description":"Test to send SIGTERM to all units and then ensure that the cluster recovers.","descriptionHtml":"<p>Test to send SIGTERM to all units and then ensure that the cluster recovers.</p>\n","status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f4d89ede630 state=finished raised AssertionError>]","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 62, in test_graceful_full_cluster_crash_test\n    await ensure_process_not_running(\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 577, in ensure_process_not_running\n    return_code != 0\nAssertionError: Process mysqld is still running with pid 840\n on unit mysql-k8s/0, container mysql\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 59, in test_graceful_full_cluster_crash_test\n    for attempt in Retrying(stop=stop_after_delay(300), wait=wait_fixed(30)):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 435, in __iter__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 368, in iter\n    result = action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 411, in exc_check\n    raise retry_exc from fut.exception()\ntenacity.RetryError: RetryError[<Future at 0x7f4d89ede630 state=finished raised AssertionError>]","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"ops_test","time":{"start":1748222948925,"stop":1748222949122,"duration":197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm","time":{"start":1748222948925,"stop":1748222948925,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1748222948925,"stop":1748222948925,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1748222948925,"stop":1748222948925,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster","time":{"start":1748222949122,"stop":1748223137257,"duration":188135},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1748223137258,"stop":1748223137258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1748223137258,"stop":1748223139300,"duration":2042},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"credentials","time":{"start":1748223139300,"stop":1748223141323,"duration":2023},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to send SIGTERM to all units and then ensure that the cluster recovers.","status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f4d89ede630 state=finished raised AssertionError>]","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 62, in test_graceful_full_cluster_crash_test\n    await ensure_process_not_running(\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 577, in ensure_process_not_running\n    return_code != 0\nAssertionError: Process mysqld is still running with pid 840\n on unit mysql-k8s/0, container mysql\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 59, in test_graceful_full_cluster_crash_test\n    for attempt in Retrying(stop=stop_after_delay(300), wait=wait_fixed(30)):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 435, in __iter__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 368, in iter\n    result = action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 411, in exc_check\n    raise retry_exc from fut.exception()\ntenacity.RetryError: RetryError[<Future at 0x7f4d89ede630 state=finished raised AssertionError>]","steps":[],"attachments":[{"uid":"5b464839e24ca2ef","name":"log","source":"5b464839e24ca2ef.txt","type":"text/plain","size":31601}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"credentials::finalizer","time":{"start":1748223492584,"stop":1748223492584,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1748223492585,"stop":1748223518715,"duration":26130},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1748223518715,"stop":1748223518715,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1748223518716,"stop":1748223519117,"duration":401},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster::finalizer","time":{"start":1748223518716,"stop":1748223518716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1748223519118,"stop":1748223519118,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1748223519118,"stop":1748223519118,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1748223519118,"stop":1748223519118,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_self_healing_stop_all"},{"name":"host","value":"fv-az1373-146"},{"name":"thread","value":"18638-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_self_healing_stop_all"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c39f046afb30ac7b","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":85,"unknown":0,"total":87},"items":[{"uid":"1b1e192898c73a2","reportUrl":"../2966//#testresult/1b1e192898c73a2","status":"passed","time":{"start":1748050301085,"stop":1748050557836,"duration":256751}},{"uid":"725300be4ff1d866","reportUrl":"../2965//#testresult/725300be4ff1d866","status":"passed","time":{"start":1747963902713,"stop":1747964288508,"duration":385795}},{"uid":"5278c31a69e5c43f","reportUrl":"../2964//#testresult/5278c31a69e5c43f","status":"passed","time":{"start":1747877520889,"stop":1747877878044,"duration":357155}},{"uid":"aef7268a4cb517a6","reportUrl":"../2963//#testresult/aef7268a4cb517a6","status":"passed","time":{"start":1747791160223,"stop":1747791478135,"duration":317912}},{"uid":"d0b4a3693093d6e4","reportUrl":"../2960//#testresult/d0b4a3693093d6e4","status":"passed","time":{"start":1747704767744,"stop":1747705067810,"duration":300066}},{"uid":"3548e67feabf8d5e","reportUrl":"../2959//#testresult/3548e67feabf8d5e","status":"passed","time":{"start":1747618286981,"stop":1747618571066,"duration":284085}},{"uid":"bd2d24434afde7d2","reportUrl":"../2958//#testresult/bd2d24434afde7d2","status":"passed","time":{"start":1747531919300,"stop":1747532227276,"duration":307976}},{"uid":"79e263ef6f39d083","reportUrl":"../2957//#testresult/79e263ef6f39d083","status":"passed","time":{"start":1747445519267,"stop":1747445757873,"duration":238606}},{"uid":"ccd1841ab75e1f17","reportUrl":"../2956//#testresult/ccd1841ab75e1f17","status":"passed","time":{"start":1747359114643,"stop":1747359428035,"duration":313392}},{"uid":"e6c6316f3f7400f3","reportUrl":"../2955//#testresult/e6c6316f3f7400f3","status":"passed","time":{"start":1747272689591,"stop":1747273030100,"duration":340509}},{"uid":"ed9c56d817b04d7b","reportUrl":"../2954//#testresult/ed9c56d817b04d7b","status":"passed","time":{"start":1747186316075,"stop":1747186634058,"duration":317983}},{"uid":"b4a7fbacc2d72e0a","reportUrl":"../2951//#testresult/b4a7fbacc2d72e0a","status":"passed","time":{"start":1747099896658,"stop":1747100185094,"duration":288436}},{"uid":"5f823f177a8be03d","reportUrl":"../2948//#testresult/5f823f177a8be03d","status":"passed","time":{"start":1747013520072,"stop":1747013824465,"duration":304393}},{"uid":"daed85f89100fc7","reportUrl":"../2947//#testresult/daed85f89100fc7","status":"passed","time":{"start":1746927152702,"stop":1746927478315,"duration":325613}},{"uid":"7f6ddc837a07ddcb","reportUrl":"../2946//#testresult/7f6ddc837a07ddcb","status":"passed","time":{"start":1746840685710,"stop":1746841017994,"duration":332284}},{"uid":"b39035ff2744110f","reportUrl":"../2940//#testresult/b39035ff2744110f","status":"passed","time":{"start":1746754306374,"stop":1746754617553,"duration":311179}},{"uid":"e8c5fe0ed1561311","reportUrl":"../2939//#testresult/e8c5fe0ed1561311","status":"passed","time":{"start":1746668014830,"stop":1746668329180,"duration":314350}},{"uid":"7866a539c8e1de56","reportUrl":"../2937//#testresult/7866a539c8e1de56","status":"passed","time":{"start":1746581501622,"stop":1746581809471,"duration":307849}},{"uid":"8255b51f29eeb97c","reportUrl":"../2931//#testresult/8255b51f29eeb97c","status":"passed","time":{"start":1746495146913,"stop":1746495487607,"duration":340694}},{"uid":"f50974d19fa6bab1","reportUrl":"../2930//#testresult/f50974d19fa6bab1","status":"passed","time":{"start":1746408801106,"stop":1746409081130,"duration":280024}}]},"tags":["asyncio"]},"source":"b0197fd4ea4c45f6.json","parameterValues":[]}