{"uid":"f83159512eeeb1a5","name":"test_remove_relation_and_relate","fullName":"tests.integration.high_availability.test_async_replication#test_remove_relation_and_relate","historyId":"a10333b321d6af7db60a068f9e6f34b9","time":{"start":1730339137922,"stop":1730339768240,"duration":630318},"description":"Test removing and re-relating the two mysql clusters.","descriptionHtml":"<p>Test removing and re-relating the two mysql clusters.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Standalone read-only unit.\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] maintenance: Starting mysqld","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_async_replication.py\", line 358, in test_remove_relation_and_relate\n    await gather(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Standalone read-only unit.\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] maintenance: Starting mysqld","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1730338248294,"stop":1730338248295,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1730338248295,"stop":1730338248295,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1730338248295,"stop":1730338248564,"duration":269},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1730338248564,"stop":1730338248564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1730338248565,"stop":1730338249199,"duration":634},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1730339135866,"stop":1730339135866,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1730339135866,"stop":1730339137921,"duration":2055},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test removing and re-relating the two mysql clusters.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Standalone read-only unit.\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] maintenance: Starting mysqld","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_async_replication.py\", line 358, in test_remove_relation_and_relate\n    await gather(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2970, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Standalone read-only unit.\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] maintenance: Starting mysqld","steps":[],"attachments":[{"uid":"17a12afa01970e89","name":"log","source":"17a12afa01970e89.txt","type":"text/plain","size":9402}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1730339768245,"stop":1730339769266,"duration":1021},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1730339769266,"stop":1730339769266,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1730339769266,"stop":1730339769280,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1730339769281,"stop":1730339770097,"duration":816},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1730339770098,"stop":1730339770099,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1730339770099,"stop":1730339770099,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1730339770099,"stop":1730339770099,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1771-323"},{"name":"thread","value":"13383-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c00d508bc06a2705","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":14,"skipped":21,"passed":154,"unknown":1,"total":190},"items":[{"uid":"efd163b7fc50588e","reportUrl":"../2399//#testresult/efd163b7fc50588e","status":"passed","time":{"start":1730252914732,"stop":1730253184262,"duration":269530}},{"uid":"dcef13fd65d4aa07","reportUrl":"../2396//#testresult/dcef13fd65d4aa07","status":"passed","time":{"start":1730166378741,"stop":1730166628646,"duration":249905}},{"uid":"2788d26ac5d4bdc2","reportUrl":"../2394//#testresult/2788d26ac5d4bdc2","status":"passed","time":{"start":1730080002055,"stop":1730080239889,"duration":237834}},{"uid":"97c853cb5be4baf5","reportUrl":"../2393//#testresult/97c853cb5be4baf5","status":"passed","time":{"start":1729993592785,"stop":1729993834760,"duration":241975}},{"uid":"bd56a033668812ae","reportUrl":"../2392//#testresult/bd56a033668812ae","status":"passed","time":{"start":1729907167505,"stop":1729907411083,"duration":243578}},{"uid":"236ffc53dd538445","reportUrl":"../2390//#testresult/236ffc53dd538445","status":"passed","time":{"start":1729820730848,"stop":1729820979127,"duration":248279}},{"uid":"213a7b6bd3f7f445","reportUrl":"../2387//#testresult/213a7b6bd3f7f445","status":"passed","time":{"start":1729734322357,"stop":1729734569150,"duration":246793}},{"uid":"80c9d24a36a885b2","reportUrl":"../2386//#testresult/80c9d24a36a885b2","status":"passed","time":{"start":1729648080289,"stop":1729648323534,"duration":243245}},{"uid":"4ce8ea0aa8066649","reportUrl":"../2384//#testresult/4ce8ea0aa8066649","status":"passed","time":{"start":1729561504497,"stop":1729561737000,"duration":232503}},{"uid":"e7bd79341ca546ad","reportUrl":"../2381//#testresult/e7bd79341ca546ad","status":"passed","time":{"start":1729475131884,"stop":1729475370089,"duration":238205}},{"uid":"ab24e0dcc30e3dba","reportUrl":"../2380//#testresult/ab24e0dcc30e3dba","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] maintenance: Starting mysqld\n  db2/2 [idle] maintenance: Starting mysqld","time":{"start":1729388762461,"stop":1729389395738,"duration":633277}},{"uid":"9904925f4398539","reportUrl":"../2379//#testresult/9904925f4398539","status":"passed","time":{"start":1729302377535,"stop":1729302629080,"duration":251545}},{"uid":"6bfd4758e53d38ab","reportUrl":"../2375//#testresult/6bfd4758e53d38ab","status":"passed","time":{"start":1729215944899,"stop":1729216169022,"duration":224123}},{"uid":"136a7a45320cf6a9","reportUrl":"../2371//#testresult/136a7a45320cf6a9","status":"passed","time":{"start":1729129883578,"stop":1729130128698,"duration":245120}},{"uid":"bdb64bd57ca4da86","reportUrl":"../2367//#testresult/bdb64bd57ca4da86","status":"passed","time":{"start":1728956813165,"stop":1728957070367,"duration":257202}},{"uid":"1edc144424c14960","reportUrl":"../2366//#testresult/1edc144424c14960","status":"passed","time":{"start":1728870306190,"stop":1728870547711,"duration":241521}},{"uid":"f43ae07b43fdde76","reportUrl":"../2364//#testresult/f43ae07b43fdde76","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] maintenance: Starting mysqld","time":{"start":1728784024475,"stop":1728784655632,"duration":631157}},{"uid":"c6f491b4e2d1aede","reportUrl":"../2363//#testresult/c6f491b4e2d1aede","status":"passed","time":{"start":1728697579325,"stop":1728697828888,"duration":249563}},{"uid":"c125eed183593369","reportUrl":"../2357//#testresult/c125eed183593369","status":"passed","time":{"start":1728611314546,"stop":1728611552586,"duration":238040}},{"uid":"a3ce6231c2432ba3","reportUrl":"../2353//#testresult/a3ce6231c2432ba3","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/1 [idle] maintenance: Starting mysqld","time":{"start":1728524886463,"stop":1728525516279,"duration":629816}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires amd64 architecture')","group(1)"]},"source":"f83159512eeeb1a5.json","parameterValues":[]}