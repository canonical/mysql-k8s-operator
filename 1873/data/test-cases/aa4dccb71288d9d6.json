{"uid":"aa4dccb71288d9d6","name":"test_restore_on_new_cluster","fullName":"tests.integration.test_backups#test_restore_on_new_cluster","historyId":"bed98d44c46e16121bf35ab3fcc6a6f9","time":{"start":1715305120449,"stop":1715306276502,"duration":1156053},"description":"Test to restore a backup on a new mysql cluster.","descriptionHtml":"<p>Test to restore a backup on a new mysql cluster.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nanother-mysql-k8s/0 [idle] active: Primary\n  another-mysql-k8s/2 [executing] maintenance: Initialising mysqld\n  another-mysql-k8s/1 [idle] active:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/test_backups.py\", line 402, in test_restore_on_new_cluster\n    await scale_application(ops_test, new_mysql_application_name, 3)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/helpers.py\", line 261, in scale_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nanother-mysql-k8s/0 [idle] active: Primary\n  another-mysql-k8s/2 [executing] maintenance: Initialising mysqld\n  another-mysql-k8s/1 [idle] active:","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1715304591912,"stop":1715304591913,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_secrets","time":{"start":1715304591913,"stop":1715304591913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"microceph","time":{"start":1715304591913,"stop":1715304651078,"duration":59165},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cloud_credentials","time":{"start":1715304651078,"stop":1715304651078,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1715304651078,"stop":1715304651311,"duration":233},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1715304651078,"stop":1715304651078,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets","time":{"start":1715304651078,"stop":1715304651078,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cloud_configs","time":{"start":1715304651078,"stop":1715304651078,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1715305120448,"stop":1715305120448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to restore a backup on a new mysql cluster.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nanother-mysql-k8s/0 [idle] active: Primary\n  another-mysql-k8s/2 [executing] maintenance: Initialising mysqld\n  another-mysql-k8s/1 [idle] active:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/test_backups.py\", line 402, in test_restore_on_new_cluster\n    await scale_application(ops_test, new_mysql_application_name, 3)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/helpers.py\", line 261, in scale_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nanother-mysql-k8s/0 [idle] active: Primary\n  another-mysql-k8s/2 [executing] maintenance: Initialising mysqld\n  another-mysql-k8s/1 [idle] active:","steps":[],"attachments":[{"uid":"21e251ec156da3e3","name":"log","source":"21e251ec156da3e3.txt","type":"text/plain","size":16288}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1715306276532,"stop":1715306276532,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1715306276533,"stop":1715306281568,"duration":5035},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1715306281568,"stop":1715306281569,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1715306281569,"stop":1715306281569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1715306281569,"stop":1715306281569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets::0","time":{"start":1715306281570,"stop":1715306324585,"duration":43015},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_backups"},{"name":"host","value":"fv-az1196-675"},{"name":"thread","value":"12818-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_backups"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":4,"passed":91,"unknown":0,"total":97},"items":[{"uid":"989fbc601f300a9","reportUrl":"../1871//#testresult/989fbc601f300a9","status":"passed","time":{"start":1715218587115,"stop":1715218953450,"duration":366335}},{"uid":"d3f99f45fe014251","reportUrl":"../1869//#testresult/d3f99f45fe014251","status":"passed","time":{"start":1715131908938,"stop":1715132262238,"duration":353300}},{"uid":"6e74f8efdcfa7439","reportUrl":"../1867//#testresult/6e74f8efdcfa7439","status":"passed","time":{"start":1715046104105,"stop":1715046455518,"duration":351413}},{"uid":"8e259b9da9e88c43","reportUrl":"../1866//#testresult/8e259b9da9e88c43","status":"passed","time":{"start":1714959450814,"stop":1714959814869,"duration":364055}},{"uid":"3efc7923be87975b","reportUrl":"../1865//#testresult/3efc7923be87975b","status":"passed","time":{"start":1714873067831,"stop":1714873423115,"duration":355284}},{"uid":"267900bf335d6c86","reportUrl":"../1864//#testresult/267900bf335d6c86","status":"passed","time":{"start":1714786581928,"stop":1714786953491,"duration":371563}},{"uid":"24d1ba0e922e64e5","reportUrl":"../1863//#testresult/24d1ba0e922e64e5","status":"passed","time":{"start":1714700618830,"stop":1714700980974,"duration":362144}},{"uid":"badadfcbf9ef1821","reportUrl":"../1858//#testresult/badadfcbf9ef1821","status":"passed","time":{"start":1714613804562,"stop":1714614157865,"duration":353303}},{"uid":"fe0c0f134e94dade","reportUrl":"../1854//#testresult/fe0c0f134e94dade","status":"passed","time":{"start":1714527402219,"stop":1714527759594,"duration":357375}},{"uid":"ca2eeb5706498f20","reportUrl":"../1844//#testresult/ca2eeb5706498f20","status":"passed","time":{"start":1714440999743,"stop":1714441377804,"duration":378061}},{"uid":"5d50f64aa035193e","reportUrl":"../1838//#testresult/5d50f64aa035193e","status":"passed","time":{"start":1714354718008,"stop":1714355077506,"duration":359498}},{"uid":"9101bd92880088f0","reportUrl":"../1837//#testresult/9101bd92880088f0","status":"passed","time":{"start":1714268255482,"stop":1714268620345,"duration":364863}},{"uid":"29a81d0f3d16b99b","reportUrl":"../1836//#testresult/29a81d0f3d16b99b","status":"passed","time":{"start":1714181857125,"stop":1714182222576,"duration":365451}},{"uid":"8ed9422a33420e79","reportUrl":"../1832//#testresult/8ed9422a33420e79","status":"passed","time":{"start":1714095386757,"stop":1714095759944,"duration":373187}},{"uid":"7f1553b4163280be","reportUrl":"../1831//#testresult/7f1553b4163280be","status":"passed","time":{"start":1714009049687,"stop":1714009414698,"duration":365011}},{"uid":"adeff76ec85b60c3","reportUrl":"../1829//#testresult/adeff76ec85b60c3","status":"passed","time":{"start":1713922889762,"stop":1713923252042,"duration":362280}},{"uid":"f279385df664c4ff","reportUrl":"../1827//#testresult/f279385df664c4ff","status":"passed","time":{"start":1713749849935,"stop":1713750214005,"duration":364070}},{"uid":"e666d0de55629fb0","reportUrl":"../1826//#testresult/e666d0de55629fb0","status":"passed","time":{"start":1713663446511,"stop":1713663813816,"duration":367305}},{"uid":"e08edcd468ccb9bc","reportUrl":"../1825//#testresult/e08edcd468ccb9bc","status":"passed","time":{"start":1713576986195,"stop":1713577365911,"duration":379716}},{"uid":"dcd5db1c669a6ab2","reportUrl":"../1823//#testresult/dcd5db1c669a6ab2","status":"passed","time":{"start":1713490586495,"stop":1713490947779,"duration":361284}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"aa4dccb71288d9d6.json","parameterValues":[]}