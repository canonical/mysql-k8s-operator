{"uid":"2fec4e50df52b96b","name":"test_remove_relation_and_relate","fullName":"tests.integration.high_availability.test_async_replication#test_remove_relation_and_relate","historyId":"a10333b321d6af7db60a068f9e6f34b9","time":{"start":1715305244719,"stop":1715305894129,"duration":649410},"description":"Test removing and re-relating the two mysql clusters.","descriptionHtml":"<p>Test removing and re-relating the two mysql clusters.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [executing] waiting: Awaiting sync data from primary cluster\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] blocked: Standalone read-only unit.","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_async_replication.py\", line 329, in test_remove_relation_and_relate\n    await gather(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [executing] waiting: Awaiting sync data from primary cluster\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] blocked: Standalone read-only unit.","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1715304558975,"stop":1715304558975,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1715304558975,"stop":1715304559205,"duration":230},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1715304558975,"stop":1715304558975,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1715304559206,"stop":1715304559206,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1715304559206,"stop":1715304559523,"duration":317},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1715305242679,"stop":1715305242679,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1715305242679,"stop":1715305244718,"duration":2039},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test removing and re-relating the two mysql clusters.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [executing] waiting: Awaiting sync data from primary cluster\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] blocked: Standalone read-only unit.","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_async_replication.py\", line 329, in test_remove_relation_and_relate\n    await gather(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [executing] waiting: Awaiting sync data from primary cluster\n  db2/1 [idle] blocked: Standalone read-only unit.\n  db2/2 [idle] blocked: Standalone read-only unit.","steps":[],"attachments":[{"uid":"847de1920e22144b","name":"log","source":"847de1920e22144b.txt","type":"text/plain","size":13810}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1715305894133,"stop":1715305895156,"duration":1023},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1715305895157,"stop":1715305895171,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1715305895157,"stop":1715305895157,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1715305895172,"stop":1715305897070,"duration":1898},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1715305897071,"stop":1715305897071,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1715305897071,"stop":1715305897071,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1715305897071,"stop":1715305897071,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1543-543"},{"name":"thread","value":"12415-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":3,"skipped":4,"passed":17,"unknown":0,"total":24},"items":[{"uid":"71ae27144686faa","reportUrl":"../1871//#testresult/71ae27144686faa","status":"passed","time":{"start":1715218781062,"stop":1715218954792,"duration":173730}},{"uid":"10fef40542fe8ad4","reportUrl":"../1869//#testresult/10fef40542fe8ad4","status":"passed","time":{"start":1715132080820,"stop":1715132253789,"duration":172969}},{"uid":"f420c253d1161ab6","reportUrl":"../1867//#testresult/f420c253d1161ab6","status":"passed","time":{"start":1715046318066,"stop":1715046512487,"duration":194421}},{"uid":"a0fb77c966279bad","reportUrl":"../1866//#testresult/a0fb77c966279bad","status":"passed","time":{"start":1714959632524,"stop":1714959807012,"duration":174488}},{"uid":"302ef3c7dfebc8ed","reportUrl":"../1865//#testresult/302ef3c7dfebc8ed","status":"passed","time":{"start":1714873293108,"stop":1714873466930,"duration":173822}},{"uid":"946ed9db1d115986","reportUrl":"../1864//#testresult/946ed9db1d115986","status":"passed","time":{"start":1714786813761,"stop":1714787007507,"duration":193746}},{"uid":"3026c831da24e715","reportUrl":"../1863//#testresult/3026c831da24e715","status":"passed","time":{"start":1714700752115,"stop":1714700928742,"duration":176627}},{"uid":"d69a466affe848d2","reportUrl":"../1858//#testresult/d69a466affe848d2","status":"passed","time":{"start":1714613972540,"stop":1714614148839,"duration":176299}},{"uid":"6c111eb964d7203a","reportUrl":"../1854//#testresult/6c111eb964d7203a","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb1/1 [executing] active:","time":{"start":1714527606214,"stop":1714528231654,"duration":625440}},{"uid":"81cc41fe8fafe4b6","reportUrl":"../1844//#testresult/81cc41fe8fafe4b6","status":"passed","time":{"start":1714441178621,"stop":1714441352353,"duration":173732}},{"uid":"dcb30c4b0a01a0a","reportUrl":"../1838//#testresult/dcb30c4b0a01a0a","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1714354220163,"stop":1714354220163,"duration":0}},{"uid":"4c5c8130283bfaf9","reportUrl":"../1837//#testresult/4c5c8130283bfaf9","status":"passed","time":{"start":1714268429686,"stop":1714268607162,"duration":177476}},{"uid":"fe7e63d1b8c6adef","reportUrl":"../1836//#testresult/fe7e63d1b8c6adef","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1714181718388,"stop":1714181718388,"duration":0}},{"uid":"5ab164514988a2e5","reportUrl":"../1832//#testresult/5ab164514988a2e5","status":"passed","time":{"start":1714095585189,"stop":1714095759575,"duration":174386}},{"uid":"20a713e7592630ab","reportUrl":"../1831//#testresult/20a713e7592630ab","status":"passed","time":{"start":1714009187854,"stop":1714009371635,"duration":183781}},{"uid":"b341be986f0f3e8e","reportUrl":"../1829//#testresult/b341be986f0f3e8e","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\ndb2/0 [idle] blocked: Standalone read-only unit.\n  db2/1 [executing] waiting: Awaiting sync data from primary cluster\n  db2/2 [idle] blocked: Standalone read-only unit.","time":{"start":1713922828229,"stop":1713923478257,"duration":650028}},{"uid":"6a29af2da48212a1","reportUrl":"../1828//#testresult/6a29af2da48212a1","status":"passed","time":{"start":1713836411778,"stop":1713836584299,"duration":172521}},{"uid":"7a36a20788977373","reportUrl":"../1827//#testresult/7a36a20788977373","status":"passed","time":{"start":1713750015140,"stop":1713750207201,"duration":192061}},{"uid":"29c5455b7faf814e","reportUrl":"../1826//#testresult/29c5455b7faf814e","status":"passed","time":{"start":1713663632486,"stop":1713663807277,"duration":174791}},{"uid":"c60b1732b790c1df","reportUrl":"../1825//#testresult/c60b1732b790c1df","status":"passed","time":{"start":1713577181823,"stop":1713577366748,"duration":184925}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')","group(1)"]},"source":"2fec4e50df52b96b.json","parameterValues":[]}