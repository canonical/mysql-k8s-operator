{"uid":"5575f9cf61b85c7f","name":"test_log_rotation","fullName":"tests.integration.high_availability.test_log_rotation#test_log_rotation","historyId":"9e999cdbfb33f46372fd11cce7bf58b9","time":{"start":1729560839173,"stop":1729560848297,"duration":9124},"description":"Test the log rotation of text files.\n\n    Run continuous writes to ensure that audit log plugin is loaded and active\n    when mysql-test-app runs start-continuous-writes (by logging into mysql).\n    ","descriptionHtml":"<p>Test the log rotation of text files.</p>\n<pre><code>Run continuous writes to ensure that audit log plugin is loaded and active\nwhen mysql-test-app runs start-continuous-writes (by logging into mysql).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_log_rotation.py\", line 113, in test_log_rotation\n    assert f\"test {log} content\" not in file_contents, f\"❌ log file {log}.log not rotated\"\nAssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"ops_test","time":{"start":1729560655369,"stop":1729560655639,"duration":270},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1729560655369,"stop":1729560655369,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1729560655369,"stop":1729560655369,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster","time":{"start":1729560655640,"stop":1729560837128,"duration":181488},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1729560837128,"stop":1729560837128,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1729560837128,"stop":1729560839172,"duration":2044},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test the log rotation of text files.\n\n    Run continuous writes to ensure that audit log plugin is loaded and active\n    when mysql-test-app runs start-continuous-writes (by logging into mysql).\n    ","status":"failed","statusMessage":"AssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_log_rotation.py\", line 113, in test_log_rotation\n    assert f\"test {log} content\" not in file_contents, f\"❌ log file {log}.log not rotated\"\nAssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","steps":[],"attachments":[{"uid":"d3387f080b1a7cc7","name":"log","source":"d3387f080b1a7cc7.txt","type":"text/plain","size":4707}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1729560848329,"stop":1729560849351,"duration":1022},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster::finalizer","time":{"start":1729560849352,"stop":1729560849352,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1729560849352,"stop":1729560849674,"duration":322},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1729560849352,"stop":1729560849352,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1729560849675,"stop":1729560849675,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1729560849675,"stop":1729560849675,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1729560849675,"stop":1729560849676,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_log_rotation"},{"name":"host","value":"fv-az585-767"},{"name":"thread","value":"13597-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_log_rotation"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f6dbf4bcfee3a89","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":44,"unknown":1,"total":46},"items":[{"uid":"efb23c104d71619f","reportUrl":"../2381//#testresult/efb23c104d71619f","status":"passed","time":{"start":1729474435622,"stop":1729474447071,"duration":11449}},{"uid":"ea71de5bb31ec8c4","reportUrl":"../2380//#testresult/ea71de5bb31ec8c4","status":"passed","time":{"start":1729388060610,"stop":1729388069939,"duration":9329}},{"uid":"23ddd121de00a880","reportUrl":"../2379//#testresult/23ddd121de00a880","status":"passed","time":{"start":1729301619212,"stop":1729301628471,"duration":9259}},{"uid":"2b85295fb6c9cc1a","reportUrl":"../2375//#testresult/2b85295fb6c9cc1a","status":"passed","time":{"start":1729215223206,"stop":1729215232598,"duration":9392}},{"uid":"8aed123c6688e289","reportUrl":"../2371//#testresult/8aed123c6688e289","status":"passed","time":{"start":1729129125852,"stop":1729129135210,"duration":9358}},{"uid":"cb5eb52e1d3ef80e","reportUrl":"../2367//#testresult/cb5eb52e1d3ef80e","status":"passed","time":{"start":1728956092304,"stop":1728956102445,"duration":10141}},{"uid":"f34e96a8eeed0330","reportUrl":"../2366//#testresult/f34e96a8eeed0330","status":"passed","time":{"start":1728869660942,"stop":1728869670237,"duration":9295}},{"uid":"2b1be43d54ad978a","reportUrl":"../2364//#testresult/2b1be43d54ad978a","status":"passed","time":{"start":1728783282288,"stop":1728783291783,"duration":9495}},{"uid":"5958ebc20d243ecb","reportUrl":"../2363//#testresult/5958ebc20d243ecb","status":"passed","time":{"start":1728696874400,"stop":1728696883791,"duration":9391}},{"uid":"22b468da03c55345","reportUrl":"../2357//#testresult/22b468da03c55345","status":"passed","time":{"start":1728610613921,"stop":1728610624477,"duration":10556}},{"uid":"1548881ed836851","reportUrl":"../2353//#testresult/1548881ed836851","status":"passed","time":{"start":1728524155096,"stop":1728524166474,"duration":11378}},{"uid":"58c8a849be9a3dde","reportUrl":"../2350//#testresult/58c8a849be9a3dde","status":"passed","time":{"start":1728437729246,"stop":1728437738355,"duration":9109}},{"uid":"a0fb81919cea2633","reportUrl":"../2348//#testresult/a0fb81919cea2633","status":"passed","time":{"start":1728351284852,"stop":1728351294057,"duration":9205}},{"uid":"bc82f68e0fe317bf","reportUrl":"../2346//#testresult/bc82f68e0fe317bf","status":"passed","time":{"start":1728264860528,"stop":1728264870010,"duration":9482}},{"uid":"8188bd2e3ed020b4","reportUrl":"../2345//#testresult/8188bd2e3ed020b4","status":"passed","time":{"start":1728178556503,"stop":1728178567232,"duration":10729}},{"uid":"d04b6cbc83ef67e5","reportUrl":"../2344//#testresult/d04b6cbc83ef67e5","status":"passed","time":{"start":1728092120503,"stop":1728092130070,"duration":9567}},{"uid":"9473dfab813c9e86","reportUrl":"../2340//#testresult/9473dfab813c9e86","status":"passed","time":{"start":1728005681872,"stop":1728005691418,"duration":9546}},{"uid":"6a65890c94b4ab48","reportUrl":"../2338//#testresult/6a65890c94b4ab48","status":"passed","time":{"start":1727919321554,"stop":1727919330837,"duration":9283}},{"uid":"3c8f7b1f9e464953","reportUrl":"../2332//#testresult/3c8f7b1f9e464953","status":"passed","time":{"start":1727833101185,"stop":1727833110637,"duration":9452}},{"uid":"fbbbc639d8609159","reportUrl":"../2327//#testresult/fbbbc639d8609159","status":"passed","time":{"start":1727746501741,"stop":1727746511661,"duration":9920}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"5575f9cf61b85c7f.json","parameterValues":[]}