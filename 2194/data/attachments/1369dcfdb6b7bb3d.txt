[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:267 Deploying a new mysql cluster
[32mINFO    [0m juju.model:model.py:2097 Deploying local:jammy/mysql-k8s-1
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [allocating] waiting: installing agent
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [executing] maintenance: Initialising mysqld
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [idle] active: Primary
[33mWARNING [0m juju.model:model.py:1563 relate is deprecated and will be removed. Use integrate instead.
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [idle] active: Primary
  s3-integrator/0 [idle] active: 
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:286 Rotating all mysql credentials
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:303 Syncing credentials
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [idle] active: Primary
  s3-integrator/0 [idle] active: 
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:319 Restoring backup_id='2024-08-20T01:33:31Z'
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:324 Ensuring that the pre-backup inserted value exists in database, while post-backup inserted value does not
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:338 Inserting value after restore
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:346 Ensuring that pre-backup and post-restore values exist in the database
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:357 Scaling mysql application to 3 units
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s (waiting for exactly 3 units, current : 1)
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [executing] active: Primary
  another-mysql-k8s/2 [executing] maintenance: Initialising mysqld
  another-mysql-k8s/1 [executing] maintenance: Initialising mysqld
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [idle] active: Primary
  another-mysql-k8s/2 [executing] waiting: waiting to get cluster primary from peers
  another-mysql-k8s/1 [executing] waiting: waiting to get cluster primary from peers
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [executing] active: Primary
  another-mysql-k8s/2 [executing] active: 
  another-mysql-k8s/1 [executing] waiting: waiting to join the cluster
[32mINFO    [0m juju.model:model.py:2971 Waiting for model:
  another-mysql-k8s/0 [idle] active: Primary
  another-mysql-k8s/2 [idle] active: 
  another-mysql-k8s/1 [idle] active: 
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:360 Ensuring inserted values before backup and after restore exist on all units
[32mINFO    [0m pytest_operator.plugin:plugin.py:790 Model status:

Model  Controller          Cloud/Region        Version  SLA          Timestamp
test   microk8s-localhost  microk8s/localhost  3.4.5    unsupported  01:42:19Z

App                Version                  Status  Scale  Charm          Channel        Rev  Address         Exposed  Message
another-mysql-k8s  8.0.37-0ubuntu0.22.04.3  active      3  mysql-k8s                       1  10.152.183.73   no       
mysql-k8s          8.0.37-0ubuntu0.22.04.3  active      3  mysql-k8s                       0  10.152.183.202  no       
s3-integrator                               active      1  s3-integrator  latest/stable   31  10.152.183.49   no       

Unit                  Workload  Agent  Address       Ports  Message
another-mysql-k8s/0*  active    idle   10.1.206.208         Primary
another-mysql-k8s/1   active    idle   10.1.206.211         
another-mysql-k8s/2   active    idle   10.1.206.212         
mysql-k8s/0*          active    idle   10.1.206.201         Primary
mysql-k8s/1           active    idle   10.1.206.205         
mysql-k8s/2           active    idle   10.1.206.206         
s3-integrator/0*      active    idle   10.1.206.202         

[32mINFO    [0m pytest_operator.plugin:plugin.py:796 Juju error logs:

unit-mysql-k8s-1: 01:41:06 ERROR unit.mysql-k8s/1.juju-log Failed to get cluster status for test_cluster
unit-mysql-k8s-1: 01:41:06 ERROR unit.mysql-k8s/1.juju-log Failed to get cluster endpoints
Traceback (most recent call last):
  File "/var/lib/juju/agents/unit-mysql-k8s-1/charm/src/mysql_k8s_helpers.py", line 786, in update_endpoints
    rw_endpoints, ro_endpoints, offline = self.get_cluster_endpoints(get_ips=False)
  File "/var/lib/juju/agents/unit-mysql-k8s-1/charm/lib/charms/tempo_k8s/v1/charm_tracing.py", line 724, in wrapped_function
    return callable(*args, **kwargs)  # type: ignore
  File "/var/lib/juju/agents/unit-mysql-k8s-1/charm/lib/charms/mysql/v0/mysql.py", line 1872, in get_cluster_endpoints
    raise MySQLGetClusterEndpointsError("Failed to get endpoints from cluster status")
charms.mysql.v0.mysql.MySQLGetClusterEndpointsError: Failed to get endpoints from cluster status

[32mINFO    [0m pytest_operator.plugin:plugin.py:862 Forgetting main...
[32mINFO    [0m integration.test_backup_aws:test_backup_aws.py:70 Cleaning backups from buckets