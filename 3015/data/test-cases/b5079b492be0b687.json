{"uid":"b5079b492be0b687","name":"test_graceful_crash_of_primary","fullName":"tests.integration.high_availability.test_self_healing_stop_primary#test_graceful_crash_of_primary","historyId":"4fb7e1b218f25777bfb277d1e637c673","time":{"start":1750642401397,"stop":1750642479516,"duration":78119},"description":"Test to send SIGTERM to primary instance and then verify recovery.","descriptionHtml":"<p>Test to send SIGTERM to primary instance and then verify recovery.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1750642192853,"stop":1750642192854,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1750642192854,"stop":1750642193064,"duration":210},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm","time":{"start":1750642192854,"stop":1750642192854,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1750642192854,"stop":1750642192854,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster","time":{"start":1750642193064,"stop":1750642397324,"duration":204260},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1750642397324,"stop":1750642397324,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1750642397324,"stop":1750642399365,"duration":2041},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"credentials","time":{"start":1750642399366,"stop":1750642401396,"duration":2030},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to send SIGTERM to primary instance and then verify recovery.","status":"passed","steps":[],"attachments":[{"uid":"b46f7a75dd8fb2d0","name":"log","source":"b46f7a75dd8fb2d0.txt","type":"text/plain","size":11529}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"credentials::finalizer","time":{"start":1750642479517,"stop":1750642479517,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1750642479517,"stop":1750642480586,"duration":1069},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster::finalizer","time":{"start":1750642480587,"stop":1750642480587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1750642480587,"stop":1750642480587,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1750642480588,"stop":1750642481195,"duration":607},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1750642481196,"stop":1750642481196,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1750642481196,"stop":1750642481196,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1750642481196,"stop":1750642481197,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_self_healing_stop_primary"},{"name":"host","value":"fv-az1278-322"},{"name":"thread","value":"18606-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_self_healing_stop_primary"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f73f068aa7c9a46e","status":"unknown","time":{}}],"categories":[],"history":{"statistic":{"failed":0,"broken":4,"skipped":0,"passed":109,"unknown":1,"total":114},"items":[{"uid":"462a5df7a260938f","reportUrl":"../3014//#testresult/462a5df7a260938f","status":"passed","time":{"start":1750555910622,"stop":1750555988598,"duration":77976}},{"uid":"b2776b671f0db700","reportUrl":"../3013//#testresult/b2776b671f0db700","status":"passed","time":{"start":1750469484995,"stop":1750469595386,"duration":110391}},{"uid":"7cac06e98b8b4f0a","reportUrl":"../3010//#testresult/7cac06e98b8b4f0a","status":"passed","time":{"start":1750383102903,"stop":1750383171748,"duration":68845}},{"uid":"5a9fb99c108c39a","reportUrl":"../3009//#testresult/5a9fb99c108c39a","status":"broken","statusDetails":"TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] error: unknown container reason \"ImagePullBackOff\": Back-off pulling image \"docker.io/jujusolutions/charm-base:ubuntu-22.04\": ErrImagePull: rpc error: code = FailedPrecondition desc = failed to pull and unpack image \"docker.io/jujusolutions/charm-base:ubuntu-22.04\": failed commit on ref \"index-sha256:5ff8ce2dd5000378cdcc12998cf5b8b6b10d7193e47acb2945f61ae1ebd1a448\": \"index-sha256:5ff8ce2dd5000378cdcc12998cf5b8b6b10d7193e47acb2945f61ae1ebd1a448\" failed size validation: 288806 != 3117: failed precondition\n  mysql-k8s/1 [idle] error: unknown container reason \"ImagePullBackOff\": Back-off pulling image \"docker.io/jujusolutions/charm-base:ubuntu-22.04\": ErrImagePull: rpc error: code = FailedPrecondition desc = failed to pull and unpack image \"docker.io/jujusolutions/charm-base:ubuntu-22.04\": failed commit on ref \"index-sha256:5ff8ce2dd5000378cdcc12998cf5b8b6b10d7193e47acb2945f61ae1ebd1a448\": \"index-sha256:5ff8ce2dd5000378cdcc12998cf5b8b6b10d7193e47acb2945f61ae1ebd1a448\" failed size validation: 288806 != 3117: failed precondition\n  mysql-k8s/2 [idle] error: unknown container reason \"ImagePullBackOff\": Back-off pulling image \"docker.io/jujusolutions/charm-base:ubuntu-22.04\": ErrImagePull: rpc error: code = FailedPrecondition desc = failed to pull and unpack image \"docker.io/jujusolutions/charm-base:ubuntu-22.04\": failed commit on ref \"index-sha256:5ff8ce2dd5000378cdcc12998cf5b8b6b10d7193e47acb2945f61ae1ebd1a448\": \"index-sha256:5ff8ce2dd5000378cdcc12998cf5b8b6b10d7193e47acb2945f61ae1ebd1a448\" failed size validation: 288806 != 3117: failed precondition","time":{"start":1750296512803,"stop":1750296512803,"duration":0}},{"uid":"a17f0254fd730a40","reportUrl":"../3007//#testresult/a17f0254fd730a40","status":"passed","time":{"start":1750210314974,"stop":1750210413317,"duration":98343}},{"uid":"2fe60b1f43b585f5","reportUrl":"../3002//#testresult/2fe60b1f43b585f5","status":"passed","time":{"start":1750123948449,"stop":1750124006381,"duration":57932}},{"uid":"e57b65058dc88fde","reportUrl":"../3001//#testresult/e57b65058dc88fde","status":"passed","time":{"start":1750037541216,"stop":1750037629421,"duration":88205}},{"uid":"4804fb990f29375b","reportUrl":"../3000//#testresult/4804fb990f29375b","status":"passed","time":{"start":1749951141263,"stop":1749951219256,"duration":77993}},{"uid":"c1466ac92284926c","reportUrl":"../2999//#testresult/c1466ac92284926c","status":"passed","time":{"start":1749864691702,"stop":1749864835929,"duration":144227}},{"uid":"fdf744ffea927bbd","reportUrl":"../2998//#testresult/fdf744ffea927bbd","status":"passed","time":{"start":1749778341664,"stop":1749778419935,"duration":78271}},{"uid":"d0513aab42746ce2","reportUrl":"../2995//#testresult/d0513aab42746ce2","status":"passed","time":{"start":1749691941250,"stop":1749692019398,"duration":78148}},{"uid":"f6fa4dd99e2bed7a","reportUrl":"../2993//#testresult/f6fa4dd99e2bed7a","status":"passed","time":{"start":1749605485169,"stop":1749605575432,"duration":90263}},{"uid":"866e5431fd99a380","reportUrl":"../2990//#testresult/866e5431fd99a380","status":"passed","time":{"start":1749519123112,"stop":1749519227529,"duration":104417}},{"uid":"9ac7c2207ce9c812","reportUrl":"../2989//#testresult/9ac7c2207ce9c812","status":"passed","time":{"start":1749432700241,"stop":1749432759289,"duration":59048}},{"uid":"da6bc945e8db090f","reportUrl":"../2988//#testresult/da6bc945e8db090f","status":"passed","time":{"start":1749346341234,"stop":1749346444521,"duration":103287}},{"uid":"591cbeea0658d3fe","reportUrl":"../2987//#testresult/591cbeea0658d3fe","status":"passed","time":{"start":1749259948493,"stop":1749260027828,"duration":79335}},{"uid":"6cbf923f1ed61825","reportUrl":"../2986//#testresult/6cbf923f1ed61825","status":"passed","time":{"start":1749173557217,"stop":1749173635188,"duration":77971}},{"uid":"2d8fc77f59d4c58b","reportUrl":"../2985//#testresult/2d8fc77f59d4c58b","status":"passed","time":{"start":1749087141509,"stop":1749087224749,"duration":83240}},{"uid":"685ed0017e46ad00","reportUrl":"../2983//#testresult/685ed0017e46ad00","status":"passed","time":{"start":1749000741285,"stop":1749000819267,"duration":77982}},{"uid":"605f8369651a27ed","reportUrl":"../2979//#testresult/605f8369651a27ed","status":"passed","time":{"start":1748914341089,"stop":1748914429290,"duration":88201}}]},"tags":["asyncio"]},"source":"b5079b492be0b687.json","parameterValues":[]}