{"uid":"e188de73c5f903cb","name":"test_build_and_deploy","fullName":"tests.integration.relations.test_database#test_build_and_deploy","historyId":"bdfc2af63e333d3ba27ec17869a51075","time":{"start":1722822076615,"stop":1722823078832,"duration":1002217},"description":"Build the charm and deploy 3 units to ensure a cluster is formed.","descriptionHtml":"<p>Build the charm and deploy 3 units to ensure a cluster is formed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/relations/test_database.py\", line 68, in test_build_and_deploy\n    await asyncio.gather(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2969, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1722822076373,"stop":1722822076374,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1722822076374,"stop":1722822076374,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1722822076374,"stop":1722822076614,"duration":240},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1722822076614,"stop":1722822076614,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Build the charm and deploy 3 units to ensure a cluster is formed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/relations/test_database.py\", line 68, in test_build_and_deploy\n    await asyncio.gather(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2969, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","steps":[],"attachments":[{"uid":"6dd18d48f723f69e","name":"log","source":"6dd18d48f723f69e.txt","type":"text/plain","size":5938}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1722823078864,"stop":1722823078864,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1722823078870,"stop":1722823079200,"duration":330},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1722823079201,"stop":1722823079201,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1722823079201,"stop":1722823079201,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1722823079201,"stop":1722823079201,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"skip_if_deployed"},{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.relations"},{"name":"suite","value":"test_database"},{"name":"host","value":"fv-az1152-487"},{"name":"thread","value":"12566-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.relations.test_database"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"dd38529ea690b3c1","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":18,"skipped":6,"passed":159,"unknown":0,"total":183},"items":[{"uid":"16115f95c7374f7b","reportUrl":"../2140//#testresult/16115f95c7374f7b","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","time":{"start":1722735888609,"stop":1722736891444,"duration":1002835}},{"uid":"b2e745a0cf96ca07","reportUrl":"../2136//#testresult/b2e745a0cf96ca07","status":"broken","statusDetails":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","time":{"start":1722562661699,"stop":1722563664276,"duration":1002577}},{"uid":"a48d07daa858b40c","reportUrl":"../2134//#testresult/a48d07daa858b40c","status":"passed","time":{"start":1722476037177,"stop":1722476177645,"duration":140468}},{"uid":"f9bdcdf264c97a05","reportUrl":"../2128//#testresult/f9bdcdf264c97a05","status":"passed","time":{"start":1722389492987,"stop":1722389626443,"duration":133456}},{"uid":"9d0be8fd4c515cef","reportUrl":"../2126//#testresult/9d0be8fd4c515cef","status":"passed","time":{"start":1722303196046,"stop":1722303329655,"duration":133609}},{"uid":"57e9e8c28d334ef8","reportUrl":"../2121//#testresult/57e9e8c28d334ef8","status":"passed","time":{"start":1722216819793,"stop":1722216954968,"duration":135175}},{"uid":"dbb480efc6db1257","reportUrl":"../2120//#testresult/dbb480efc6db1257","status":"passed","time":{"start":1722130487620,"stop":1722130637506,"duration":149886}},{"uid":"9f5f8e8001a000d3","reportUrl":"../2119//#testresult/9f5f8e8001a000d3","status":"passed","time":{"start":1722043952399,"stop":1722044081210,"duration":128811}},{"uid":"b75207a93866c0e7","reportUrl":"../2112//#testresult/b75207a93866c0e7","status":"passed","time":{"start":1721957598886,"stop":1721957733093,"duration":134207}},{"uid":"447f2f351b9913b9","reportUrl":"../2105//#testresult/447f2f351b9913b9","status":"passed","time":{"start":1721871136214,"stop":1721871268381,"duration":132167}},{"uid":"f5ecfc1095e0d6e9","reportUrl":"../2103//#testresult/f5ecfc1095e0d6e9","status":"passed","time":{"start":1721785281339,"stop":1721785419849,"duration":138510}},{"uid":"1b577071a4291e96","reportUrl":"../2101//#testresult/1b577071a4291e96","status":"passed","time":{"start":1721698816154,"stop":1721698949601,"duration":133447}},{"uid":"2821f0f9ef5d672e","reportUrl":"../2095//#testresult/2821f0f9ef5d672e","status":"passed","time":{"start":1721611983549,"stop":1721612118387,"duration":134838}},{"uid":"e9b019d2b923bc69","reportUrl":"../2094//#testresult/e9b019d2b923bc69","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: mysql-k8s","time":{"start":1721525515322,"stop":1721525537528,"duration":22206}},{"uid":"2dbdf3ac1c9b9f99","reportUrl":"../2093//#testresult/2dbdf3ac1c9b9f99","status":"passed","time":{"start":1721439160618,"stop":1721439285491,"duration":124873}},{"uid":"1ef368df427604d","reportUrl":"../2087//#testresult/1ef368df427604d","status":"passed","time":{"start":1721356506511,"stop":1721356637776,"duration":131265}},{"uid":"2248b4e60228516a","reportUrl":"../2082//#testresult/2248b4e60228516a","status":"passed","time":{"start":1721266474123,"stop":1721266608045,"duration":133922}},{"uid":"9c2e5c64789e4841","reportUrl":"../2079//#testresult/9c2e5c64789e4841","status":"passed","time":{"start":1721180209917,"stop":1721180357503,"duration":147586}},{"uid":"83a624fe24965bb2","reportUrl":"../2077//#testresult/83a624fe24965bb2","status":"passed","time":{"start":1721093605636,"stop":1721093727457,"duration":121821}},{"uid":"dec638fe912ac3fc","reportUrl":"../2071//#testresult/dec638fe912ac3fc","status":"passed","time":{"start":1721007436015,"stop":1721007559625,"duration":123610}}]},"tags":["skip_if_deployed","asyncio","abort_on_fail","group(1)"]},"source":"e188de73c5f903cb.json","parameterValues":[]}