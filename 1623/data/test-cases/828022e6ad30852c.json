{"uid":"828022e6ad30852c","name":"test_deploy_and_relate_osm_bundle","fullName":"tests.integration.relations.test_mysql_root#test_deploy_and_relate_osm_bundle","historyId":"eb5a5a4a94b4d08b545684abb5e6355c","time":{"start":1708046811070,"stop":1708047820480,"duration":1009410},"description":"Test the deployment and relation with osm bundle with mysql replacing mariadb.","descriptionHtml":"<p>Test the deployment and relation with osm bundle with mysql replacing mariadb.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [executing] maintenance: Initialising mysqld","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/relations/test_mysql_root.py\", line 113, in test_deploy_and_relate_osm_bundle\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [executing] maintenance: Initialising mysqld","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1708046810820,"stop":1708046810821,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1708046810821,"stop":1708046811069,"duration":248},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1708046810821,"stop":1708046810821,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1708046811069,"stop":1708046811070,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test the deployment and relation with osm bundle with mysql replacing mariadb.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [executing] maintenance: Initialising mysqld","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/relations/test_mysql_root.py\", line 113, in test_deploy_and_relate_osm_bundle\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2757, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [executing] maintenance: Initialising mysqld","steps":[],"attachments":[{"uid":"350e70a5b327be9","name":"log","source":"350e70a5b327be9.txt","type":"text/plain","size":7581}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1708047820497,"stop":1708047820497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1708048693077,"stop":1708048711434,"duration":18357},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1708048711435,"stop":1708048711435,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1708048711435,"stop":1708048711435,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1708048711435,"stop":1708048711435,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.relations"},{"name":"suite","value":"test_mysql_root"},{"name":"host","value":"fv-az1493-410"},{"name":"thread","value":"11870-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.relations.test_mysql_root"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":19,"unknown":0,"total":21},"items":[{"uid":"6869b8b32e4ea83","reportUrl":"../1620//#testresult/6869b8b32e4ea83","status":"passed","time":{"start":1707960441974,"stop":1707960652145,"duration":210171}},{"uid":"1966764bc607553c","reportUrl":"../1615//#testresult/1966764bc607553c","status":"passed","time":{"start":1707874044966,"stop":1707874243708,"duration":198742}},{"uid":"780730e5f9ed584b","reportUrl":"../1611//#testresult/780730e5f9ed584b","status":"passed","time":{"start":1707787635699,"stop":1707787822912,"duration":187213}},{"uid":"e55a855b674c3d9c","reportUrl":"../1607//#testresult/e55a855b674c3d9c","status":"passed","time":{"start":1707701241207,"stop":1707701419018,"duration":177811}},{"uid":"afe0ea2a3326ffc3","reportUrl":"../1606//#testresult/afe0ea2a3326ffc3","status":"passed","time":{"start":1707614923769,"stop":1707615138677,"duration":214908}},{"uid":"af307dee48b32f1e","reportUrl":"../1604//#testresult/af307dee48b32f1e","status":"passed","time":{"start":1707528340349,"stop":1707528532854,"duration":192505}},{"uid":"7ff552db7102499a","reportUrl":"../1597//#testresult/7ff552db7102499a","status":"passed","time":{"start":1707442002132,"stop":1707442184560,"duration":182428}},{"uid":"84f7d217f61df365","reportUrl":"../1595//#testresult/84f7d217f61df365","status":"passed","time":{"start":1707355572033,"stop":1707355759050,"duration":187017}},{"uid":"2ecf16b47e96aff5","reportUrl":"../1589//#testresult/2ecf16b47e96aff5","status":"passed","time":{"start":1707269177371,"stop":1707269383369,"duration":205998}},{"uid":"e08f4435af17ed04","reportUrl":"../1585//#testresult/e08f4435af17ed04","status":"broken","statusDetails":"juju.errors.JujuUnitError: Unit in error: osm-kafka/0","time":{"start":1707182853900,"stop":1707182939680,"duration":85780}},{"uid":"41dd75a97e3e9a7a","reportUrl":"../1584//#testresult/41dd75a97e3e9a7a","status":"passed","time":{"start":1707096552702,"stop":1707096752562,"duration":199860}},{"uid":"e3f7387c49d97752","reportUrl":"../1580//#testresult/e3f7387c49d97752","status":"passed","time":{"start":1707010058672,"stop":1707010247687,"duration":189015}},{"uid":"234aba562d6d912a","reportUrl":"../1579//#testresult/234aba562d6d912a","status":"passed","time":{"start":1706923550747,"stop":1706923758274,"duration":207527}},{"uid":"ea06023baedc8926","reportUrl":"../1574//#testresult/ea06023baedc8926","status":"passed","time":{"start":1706837187454,"stop":1706837390153,"duration":202699}},{"uid":"4798f2b22ada78cc","reportUrl":"../1570//#testresult/4798f2b22ada78cc","status":"passed","time":{"start":1706750878295,"stop":1706751085064,"duration":206769}},{"uid":"a49dab54adc8ba","reportUrl":"../1569//#testresult/a49dab54adc8ba","status":"passed","time":{"start":1706664459149,"stop":1706664644209,"duration":185060}},{"uid":"cd5f9f39c74a692","reportUrl":"../1557//#testresult/cd5f9f39c74a692","status":"passed","time":{"start":1706578034341,"stop":1706578249934,"duration":215593}},{"uid":"9bc56b3e8ac6b6dc","reportUrl":"../1554//#testresult/9bc56b3e8ac6b6dc","status":"passed","time":{"start":1706491647464,"stop":1706491845742,"duration":198278}},{"uid":"d3a8f7badcd7cede","reportUrl":"../1546//#testresult/d3a8f7badcd7cede","status":"passed","time":{"start":1706405273082,"stop":1706405478040,"duration":204958}},{"uid":"c86babfaea199624","reportUrl":"../1545//#testresult/c86babfaea199624","status":"passed","time":{"start":1706318821641,"stop":1706319018394,"duration":196753}}]},"tags":["asyncio","group(1)"]},"source":"828022e6ad30852c.json","parameterValues":[]}