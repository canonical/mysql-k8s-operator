{"uid":"769cb5db71f1c209","name":"test_deploy_highly_available_cluster","fullName":"tests.integration.integration.high_availability.test_self_healing_stop_primary#test_deploy_highly_available_cluster","historyId":"825d266c4cb87bdbd13582fb97c32440","time":{"start":1768700407906,"stop":1768700437275,"duration":29369},"description":"Simple test to ensure that the MySQL and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the MySQL and application charms get deployed.</p>\n","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/high_availability/test_self_healing_stop_primary.py\", line 57, in test_deploy_highly_available_cluster\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"charm","time":{"start":1768700407597,"stop":1768700407597,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1768700407598,"stop":1768700407905,"duration":307},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1768700407905,"stop":1768700407905,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the MySQL and application charms get deployed.","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/high_availability/test_self_healing_stop_primary.py\", line 57, in test_deploy_highly_available_cluster\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","steps":[],"attachments":[{"uid":"87c06d557f965950","name":"log","source":"87c06d557f965950.txt","type":"text/plain","size":852}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1768700437280,"stop":1768700437280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1768700482683,"stop":1768700483134,"duration":451},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration.integration.high_availability"},{"name":"suite","value":"test_self_healing_stop_primary"},{"name":"host","value":"runnervmmtnos"},{"name":"thread","value":"18221-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.integration.high_availability.test_self_healing_stop_primary"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"38ee0e5722964b8c","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":37,"unknown":0,"total":39},"items":[{"uid":"6a7ba3a80e308c86","reportUrl":"../65//#testresult/6a7ba3a80e308c86","status":"passed","time":{"start":1768527989204,"stop":1768528118300,"duration":129096}},{"uid":"c7bb58da10ae95cf","reportUrl":"../64//#testresult/c7bb58da10ae95cf","status":"passed","time":{"start":1768443520868,"stop":1768443658301,"duration":137433}},{"uid":"7b4c4615cce2a329","reportUrl":"../63//#testresult/7b4c4615cce2a329","status":"passed","time":{"start":1768356603463,"stop":1768356749452,"duration":145989}},{"uid":"2eebbda19635eded","reportUrl":"../61//#testresult/2eebbda19635eded","status":"passed","time":{"start":1768182459734,"stop":1768182599401,"duration":139667}},{"uid":"601e4facd8ca0e9e","reportUrl":"../60//#testresult/601e4facd8ca0e9e","status":"passed","time":{"start":1768096057853,"stop":1768096195661,"duration":137808}},{"uid":"ac3f052ad28cfefe","reportUrl":"../59//#testresult/ac3f052ad28cfefe","status":"passed","time":{"start":1768010452477,"stop":1768010591625,"duration":139148}},{"uid":"2ac24db2ec543609","reportUrl":"../58//#testresult/2ac24db2ec543609","status":"passed","time":{"start":1767923728027,"stop":1767923868572,"duration":140545}},{"uid":"aac53af7fd936a47","reportUrl":"../56//#testresult/aac53af7fd936a47","status":"passed","time":{"start":1767750872751,"stop":1767751017222,"duration":144471}},{"uid":"371f0ab52838b4b1","reportUrl":"../55//#testresult/371f0ab52838b4b1","status":"passed","time":{"start":1767663681366,"stop":1767663808843,"duration":127477}},{"uid":"d2541cdd3874380b","reportUrl":"../54//#testresult/d2541cdd3874380b","status":"passed","time":{"start":1767578238599,"stop":1767578374858,"duration":136259}},{"uid":"51de13e2dfd771f8","reportUrl":"../53//#testresult/51de13e2dfd771f8","status":"passed","time":{"start":1767491986992,"stop":1767492130887,"duration":143895}},{"uid":"8c5863d952f97225","reportUrl":"../52//#testresult/8c5863d952f97225","status":"passed","time":{"start":1767404665607,"stop":1767404800084,"duration":134477}},{"uid":"d0b1859324f2afae","reportUrl":"../51//#testresult/d0b1859324f2afae","status":"passed","time":{"start":1767318240602,"stop":1767318369804,"duration":129202}},{"uid":"dfe49ccb01f05394","reportUrl":"../50//#testresult/dfe49ccb01f05394","status":"passed","time":{"start":1767231936917,"stop":1767232085176,"duration":148259}},{"uid":"3d787f9d1040a64a","reportUrl":"../49//#testresult/3d787f9d1040a64a","status":"passed","time":{"start":1767145610601,"stop":1767145745364,"duration":134763}},{"uid":"a0a52a32c6efe668","reportUrl":"../48//#testresult/a0a52a32c6efe668","status":"passed","time":{"start":1767059111433,"stop":1767059259794,"duration":148361}},{"uid":"877d7b2b1121b0d1","reportUrl":"../47//#testresult/877d7b2b1121b0d1","status":"passed","time":{"start":1766972810482,"stop":1766972956863,"duration":146381}},{"uid":"c9a334125bf448d6","reportUrl":"../46//#testresult/c9a334125bf448d6","status":"passed","time":{"start":1766886161501,"stop":1766886297154,"duration":135653}},{"uid":"45ddd562cf6bb291","reportUrl":"../45//#testresult/45ddd562cf6bb291","status":"passed","time":{"start":1766800118661,"stop":1766800252002,"duration":133341}},{"uid":"77aafd7839110486","reportUrl":"../44//#testresult/77aafd7839110486","status":"passed","time":{"start":1766713357188,"stop":1766713489968,"duration":132780}}]},"tags":["abort_on_fail"]},"source":"769cb5db71f1c209.json","parameterValues":[]}