{"uid":"4922b57a4935f92e","name":"test_kill_db_process","fullName":"tests.integration.high_availability.test_self_healing#test_kill_db_process","historyId":"cf89d21b60cb6eab4b436c583b096289","time":{"start":1710120635140,"stop":1710120965437,"duration":330297},"description":"Test to send a SIGKILL to the primary db process and ensure that the cluster self heals.","descriptionHtml":"<p>Test to send a SIGKILL to the primary db process and ensure that the cluster self heals.</p>\n","status":"failed","statusMessage":"AssertionError: The mysql application is not fully online after sending SIGKILL to primary\nassert False","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_self_healing.py\", line 84, in test_kill_db_process\n    assert await ensure_n_online_mysql_members(\nAssertionError: The mysql application is not fully online after sending SIGKILL to primary\nassert False","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop","time":{"start":1710120459064,"stop":1710120459064,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1710120459065,"stop":1710120459297,"duration":232},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1710120459065,"stop":1710120459065,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1710120635140,"stop":1710120635140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1710120635140,"stop":1710120635140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to send a SIGKILL to the primary db process and ensure that the cluster self heals.","status":"failed","statusMessage":"AssertionError: The mysql application is not fully online after sending SIGKILL to primary\nassert False","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_self_healing.py\", line 84, in test_kill_db_process\n    assert await ensure_n_online_mysql_members(\nAssertionError: The mysql application is not fully online after sending SIGKILL to primary\nassert False","steps":[],"attachments":[{"uid":"7518007b70eb24dd","name":"log","source":"7518007b70eb24dd.txt","type":"text/plain","size":536}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1710120965440,"stop":1710120965440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1710120965454,"stop":1710120983432,"duration":17978},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1710120983433,"stop":1710120983433,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1710120983433,"stop":1710120983433,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1710120983433,"stop":1710120983433,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az1251-612"},{"name":"thread","value":"12566-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":4,"skipped":0,"passed":29,"unknown":0,"total":36},"items":[{"uid":"62ed0d68681311ad","reportUrl":"../1700//#testresult/62ed0d68681311ad","status":"passed","time":{"start":1710034279780,"stop":1710034369860,"duration":90080}},{"uid":"39f9f5bf58f113f5","reportUrl":"../1699//#testresult/39f9f5bf58f113f5","status":"passed","time":{"start":1709947697285,"stop":1709947787305,"duration":90020}},{"uid":"89f05095fe62575b","reportUrl":"../1694//#testresult/89f05095fe62575b","status":"passed","time":{"start":1709861357728,"stop":1709861448822,"duration":91094}},{"uid":"a3a49f8ac0508f3e","reportUrl":"../1686//#testresult/a3a49f8ac0508f3e","status":"passed","time":{"start":1709774509628,"stop":1709774599813,"duration":90185}},{"uid":"f3db5d5a92ca0070","reportUrl":"../1661//#testresult/f3db5d5a92ca0070","status":"passed","time":{"start":1709083757679,"stop":1709083847743,"duration":90064}},{"uid":"28157396f80f5eff","reportUrl":"../1658//#testresult/28157396f80f5eff","status":"passed","time":{"start":1708997358743,"stop":1708997448870,"duration":90127}},{"uid":"62ba68224665f1a7","reportUrl":"../1652//#testresult/62ba68224665f1a7","status":"passed","time":{"start":1708911077849,"stop":1708911167842,"duration":89993}},{"uid":"58c1aecf75d60ccc","reportUrl":"../1651//#testresult/58c1aecf75d60ccc","status":"passed","time":{"start":1708824685085,"stop":1708824775094,"duration":90009}},{"uid":"edee49149921b4d2","reportUrl":"../1649//#testresult/edee49149921b4d2","status":"passed","time":{"start":1708738123249,"stop":1708738213506,"duration":90257}},{"uid":"11e5a2f185f37a9c","reportUrl":"../1648//#testresult/11e5a2f185f37a9c","status":"passed","time":{"start":1708651775181,"stop":1708651865345,"duration":90164}},{"uid":"d4b97510a3f1e8bd","reportUrl":"../1644//#testresult/d4b97510a3f1e8bd","status":"passed","time":{"start":1708565357797,"stop":1708565446860,"duration":89063}},{"uid":"40e7aa2341fff0f2","reportUrl":"../1641//#testresult/40e7aa2341fff0f2","status":"passed","time":{"start":1708479050668,"stop":1708479140798,"duration":90130}},{"uid":"93f5d63149e58bb0","reportUrl":"../1639//#testresult/93f5d63149e58bb0","status":"passed","time":{"start":1708392539079,"stop":1708392630275,"duration":91196}},{"uid":"4f16446f005ea0a7","reportUrl":"../1633//#testresult/4f16446f005ea0a7","status":"passed","time":{"start":1708306259384,"stop":1708306351520,"duration":92136}},{"uid":"3ff3e205a9e561b7","reportUrl":"../1632//#testresult/3ff3e205a9e561b7","status":"passed","time":{"start":1708219843882,"stop":1708219934220,"duration":90338}},{"uid":"d2066860e51aa11e","reportUrl":"../1631//#testresult/d2066860e51aa11e","status":"passed","time":{"start":1708133370903,"stop":1708133463058,"duration":92155}},{"uid":"bbaf8816a5824ac7","reportUrl":"../1623//#testresult/bbaf8816a5824ac7","status":"passed","time":{"start":1708046969724,"stop":1708047058862,"duration":89138}},{"uid":"7fa7d6c7d4e6057c","reportUrl":"../1620//#testresult/7fa7d6c7d4e6057c","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: mysql-k8s","time":{"start":1707960489041,"stop":1707960531377,"duration":42336}},{"uid":"9f428eaed7874e9","reportUrl":"../1615//#testresult/9f428eaed7874e9","status":"passed","time":{"start":1707874190729,"stop":1707874281979,"duration":91250}},{"uid":"e139e76e853dbc3b","reportUrl":"../1611//#testresult/e139e76e853dbc3b","status":"passed","time":{"start":1707787818507,"stop":1707787909895,"duration":91388}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"4922b57a4935f92e.json","parameterValues":[]}