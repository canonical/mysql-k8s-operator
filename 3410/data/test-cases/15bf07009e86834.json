{"uid":"15bf07009e86834","name":"test_scale_up_from_zero","fullName":"tests.integration.test_charm#test_scale_up_from_zero","historyId":"a01fee3cecd9dd01a573eb546271733b","time":{"start":1761963515897,"stop":1761964462217,"duration":946320},"description":"Ensure scaling down to zero and back up works.","descriptionHtml":"<p>Ensure scaling down to zero and back up works.</p>\n","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] maintenance: joining the cluster\n  mysql-k8s/2 [idle] active:","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/test_charm.py\", line 209, in test_scale_up_from_zero\n    await scale_application(ops_test, APP_NAME, 3)\n  File \"/root/spread_project/tests/integration/helpers.py\", line 246, in scale_application\n    await ops_test.model.wait_for_idle(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] maintenance: joining the cluster\n  mysql-k8s/2 [idle] active:","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1761963028007,"stop":1761963028008,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1761963028008,"stop":1761963028212,"duration":204},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1761963028008,"stop":1761963028008,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1761963515897,"stop":1761963515897,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Ensure scaling down to zero and back up works.","status":"broken","statusMessage":"TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] maintenance: joining the cluster\n  mysql-k8s/2 [idle] active:","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/test_charm.py\", line 209, in test_scale_up_from_zero\n    await scale_application(ops_test, APP_NAME, 3)\n  File \"/root/spread_project/tests/integration/helpers.py\", line 246, in scale_application\n    await ops_test.model.wait_for_idle(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/juju/model.py\", line 3209, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nTimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] active: Primary\n  mysql-k8s/1 [idle] maintenance: joining the cluster\n  mysql-k8s/2 [idle] active:","steps":[],"attachments":[{"uid":"1d309ec458c4350e","name":"log","source":"1d309ec458c4350e.txt","type":"text/plain","size":5544}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1761964462254,"stop":1761964462254,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1761964462269,"stop":1761964462716,"duration":447},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1761964462716,"stop":1761964462716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1761964462717,"stop":1761964462717,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1761964462717,"stop":1761964462717,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_charm"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"19018-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_charm"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"9a0719a753e95a8d","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":4,"skipped":4,"passed":257,"unknown":12,"total":277},"items":[{"uid":"ea846c17667317a3","reportUrl":"../3409//#testresult/ea846c17667317a3","status":"passed","time":{"start":1761875419299,"stop":1761875599168,"duration":179869}},{"uid":"f3f81ed3dd40bab8","reportUrl":"../3404//#testresult/f3f81ed3dd40bab8","status":"passed","time":{"start":1761828946266,"stop":1761829111108,"duration":164842}},{"uid":"9eb52dc285555e5e","reportUrl":"../3393//#testresult/9eb52dc285555e5e","status":"passed","time":{"start":1761702983073,"stop":1761703159442,"duration":176369}},{"uid":"c08fc3abaf679445","reportUrl":"../3382//#testresult/c08fc3abaf679445","status":"passed","time":{"start":1761616723030,"stop":1761616893283,"duration":170253}},{"uid":"a30045caf118b1ac","reportUrl":"../3374//#testresult/a30045caf118b1ac","status":"passed","time":{"start":1761531265125,"stop":1761531414200,"duration":149075}},{"uid":"463361d9b76853f5","reportUrl":"../3373//#testresult/463361d9b76853f5","status":"passed","time":{"start":1761444079564,"stop":1761444227489,"duration":147925}},{"uid":"e735745c0581ebe1","reportUrl":"../3372//#testresult/e735745c0581ebe1","status":"passed","time":{"start":1761357347049,"stop":1761357505461,"duration":158412}},{"uid":"460e6b7773357cb8","reportUrl":"../3364//#testresult/460e6b7773357cb8","status":"passed","time":{"start":1761271405010,"stop":1761271559503,"duration":154493}},{"uid":"1aed44aa55c3c5b7","reportUrl":"../3358//#testresult/1aed44aa55c3c5b7","status":"passed","time":{"start":1761184230682,"stop":1761184399187,"duration":168505}},{"uid":"3f25b650dc6ae5d2","reportUrl":"../3355//#testresult/3f25b650dc6ae5d2","status":"passed","time":{"start":1761104495717,"stop":1761104664909,"duration":169192}},{"uid":"10fdd47ff77f03f2","reportUrl":"../3351//#testresult/10fdd47ff77f03f2","status":"passed","time":{"start":1761011959651,"stop":1761012144709,"duration":185058}},{"uid":"fcefac66bcbafc10","reportUrl":"../3344//#testresult/fcefac66bcbafc10","status":"passed","time":{"start":1760926377442,"stop":1760926529910,"duration":152468}},{"uid":"e3120b2d9a8139a2","reportUrl":"../3343//#testresult/e3120b2d9a8139a2","status":"passed","time":{"start":1760838521264,"stop":1760838678357,"duration":157093}},{"uid":"78060f07c5739e56","reportUrl":"../3342//#testresult/78060f07c5739e56","status":"passed","time":{"start":1760777605606,"stop":1760777785092,"duration":179486}},{"uid":"f3c4649130cdb2e","reportUrl":"../3338//#testresult/f3c4649130cdb2e","status":"passed","time":{"start":1760684821000,"stop":1760684982854,"duration":161854}},{"uid":"863c20d273e90782","reportUrl":"../3336//#testresult/863c20d273e90782","status":"passed","time":{"start":1760580537733,"stop":1760580678858,"duration":141125}},{"uid":"4d374c14cd9090f2","reportUrl":"../3334//#testresult/4d374c14cd9090f2","status":"passed","time":{"start":1760493704584,"stop":1760493863356,"duration":158772}},{"uid":"94510531a032c0f1","reportUrl":"../3327//#testresult/94510531a032c0f1","status":"passed","time":{"start":1760407659471,"stop":1760407828202,"duration":168731}},{"uid":"96026aaa62ee5cb3","reportUrl":"../3326//#testresult/96026aaa62ee5cb3","status":"passed","time":{"start":1760321479241,"stop":1760321633445,"duration":154204}},{"uid":"c72f7981e1397d7b","reportUrl":"../3325//#testresult/c72f7981e1397d7b","status":"passed","time":{"start":1760237067527,"stop":1760237221724,"duration":154197}}]},"tags":["asyncio","abort_on_fail"]},"source":"15bf07009e86834.json","parameterValues":[]}