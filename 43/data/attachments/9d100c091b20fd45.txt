[32mINFO    [0m jubilant:_juju.py:316 cli: juju version --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:67 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json mysql-test-app/0 clear-continuous-writes
[32mINFO    [0m root:test_async_replication_upgrade.py:69 Starting continuous writes
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json mysql-test-app/0 start-continuous-writes
[32mINFO    [0m jubilant:_juju.py:316 cli: juju version --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju version --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:262 Run pre-upgrade-check action
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 pre-upgrade-check
[32mINFO    [0m root:test_async_replication_upgrade.py:266 Assert slow shutdown is enabled
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmp6stpejfp
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/1 get-password --params /root/snap/juju/common/tmplq9jl_02
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/2 get-password --params /root/snap/juju/common/tmpkn9c0ayr
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:271 Assert primary is set to leader
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-cluster-status --wait 300s --params /root/snap/juju/common/tmpxvwgx1rt
[32mINFO    [0m root:test_async_replication_upgrade.py:275 Assert partition is set to 2
[32mINFO    [0m httpx:_client.py:1026 HTTP Request: GET https://10.1.0.105:16443/apis/apps/v1/namespaces/testing/statefulsets/db1 "HTTP/1.1 200 OK"
[32mINFO    [0m root:test_async_replication_upgrade.py:281 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-cluster-status --wait 300s --params /root/snap/juju/common/tmp9702rxhd
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmp7x0f0pif
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpjd3kh9vj
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/1 get-password --params /root/snap/juju/common/tmp24l8t94j
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/2 get-password --params /root/snap/juju/common/tmpxhr33uvi
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:284 Refresh the charm
[32mINFO    [0m jubilant:_juju.py:316 cli: juju refresh --model testing db1 --path ./mysql-k8s_ubuntu@22.04-amd64.charm
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:290 Wait for upgrade to complete on first upgrading unit
[32mINFO    [0m root:test_async_replication_upgrade.py:296 Resume upgrade
[32mINFO    [0m httpx:_client.py:1026 HTTP Request: GET https://10.1.0.105:16443/apis/apps/v1/namespaces/testing/statefulsets/db1 "HTTP/1.1 200 OK"
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 resume-upgrade
[32mINFO    [0m httpx:_client.py:1026 HTTP Request: GET https://10.1.0.105:16443/apis/apps/v1/namespaces/testing/statefulsets/db1 "HTTP/1.1 200 OK"
[32mINFO    [0m root:test_async_replication_upgrade.py:306 Wait for upgrade to complete
[32mINFO    [0m root:test_async_replication_upgrade.py:312 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-cluster-status --wait 300s --params /root/snap/juju/common/tmpf79ap064
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/2 get-password --params /root/snap/juju/common/tmpkb4qmh91
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpazbu9sw7
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmp7xx3k607
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmphs1s4qzb
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpx7vbl30z
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpcnw_c_0d
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpis_m_s_s
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpsxld3t6d
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpbo6klkup
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpnx47c99o
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpli56sbp1
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpe5y4pwbt
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpyrbbcv57
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmp2e1xkkb6
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpsamj7wrl
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpayogwqhf
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmpk88iiucr
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/0 get-password --params /root/snap/juju/common/tmp8pkqf4zu
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/1 get-password --params /root/snap/juju/common/tmpp_xdz3x2
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json db1/2 get-password --params /root/snap/juju/common/tmp3z7iopp7
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:262 Run pre-upgrade-check action
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 pre-upgrade-check
[32mINFO    [0m root:test_async_replication_upgrade.py:266 Assert slow shutdown is enabled
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 get-password --params /root/snap/juju/common/tmp87nzx4r0
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/1 get-password --params /root/snap/juju/common/tmp715cxw_2
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/2 get-password --params /root/snap/juju/common/tmp8n9un68i
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:271 Assert primary is set to leader
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 get-cluster-status --wait 300s --params /root/snap/juju/common/tmp1mcxn2_i
[32mINFO    [0m root:test_async_replication_upgrade.py:275 Assert partition is set to 2
[32mINFO    [0m httpx:_client.py:1026 HTTP Request: GET https://10.1.0.105:16443/apis/apps/v1/namespaces/testing-other/statefulsets/db2 "HTTP/1.1 200 OK"
[32mINFO    [0m root:test_async_replication_upgrade.py:281 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 get-cluster-status --wait 300s --params /root/snap/juju/common/tmpdfi0izjg
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 get-password --params /root/snap/juju/common/tmpnpnatvrx
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 get-password --params /root/snap/juju/common/tmpciiprdki
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/1 get-password --params /root/snap/juju/common/tmpp2_l8yxi
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/2 get-password --params /root/snap/juju/common/tmpp4w6hs_j
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:284 Refresh the charm
[32mINFO    [0m jubilant:_juju.py:316 cli: juju refresh --model testing-other db2 --path ./mysql-k8s_ubuntu@22.04-amd64.charm
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:290 Wait for upgrade to complete on first upgrading unit
[32mINFO    [0m root:test_async_replication_upgrade.py:296 Resume upgrade
[32mINFO    [0m httpx:_client.py:1026 HTTP Request: GET https://10.1.0.105:16443/apis/apps/v1/namespaces/testing-other/statefulsets/db2 "HTTP/1.1 200 OK"
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 resume-upgrade
[32mINFO    [0m httpx:_client.py:1026 HTTP Request: GET https://10.1.0.105:16443/apis/apps/v1/namespaces/testing-other/statefulsets/db2 "HTTP/1.1 200 OK"
[32mINFO    [0m root:test_async_replication_upgrade.py:306 Wait for upgrade to complete
[32mINFO    [0m root:test_async_replication_upgrade.py:312 Ensure continuous writes are incrementing
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 get-cluster-status --wait 300s --params /root/snap/juju/common/tmp88xdsgg9
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/2 get-password --params /root/snap/juju/common/tmph_zlt5ba
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/0 get-password --params /root/snap/juju/common/tmpf7e2hcfn
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/1 get-password --params /root/snap/juju/common/tmpi73i05mv
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing-other --format json db2/2 get-password --params /root/snap/juju/common/tmpjmaf691c
[32mINFO    [0m jubilant:_juju.py:316 cli: juju status --model testing-other --format json
[32mINFO    [0m root:test_async_replication_upgrade.py:74 Clearing continuous writes
[32mINFO    [0m jubilant:_juju.py:316 cli: juju run --model testing --format json mysql-test-app/0 clear-continuous-writes