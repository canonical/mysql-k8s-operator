{"uid":"18f1a9f19560f276","name":"test_restore_on_same_cluster","fullName":"tests.integration.integration.test_backup_aws#test_restore_on_same_cluster","historyId":"b663bd0e26688ae044fa3c32270e0dbd","time":{"start":1768961535247,"stop":1768961619610,"duration":84363},"description":"Test to restore a backup to the same mysql cluster.","descriptionHtml":"<p>Test to restore a backup to the same mysql cluster.</p>\n","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'config', '--model', 'testing', 's3-integrator', 'endpoint=https://s3.amazonaws.com', 'bucket=data-charms-testing', 'path=mysql-k8s/a9ea3cac-6321-4164-956a-c6408fac574b', 'region=us-east-1']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR application \"s3-integrator\" not found","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/test_backup_aws.py\", line 224, in test_restore_on_same_cluster\n    juju.config(S3_INTEGRATOR, cloud_configs)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 385, in config\n    self.cli(*args)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 306, in cli\n    stdout, _ = self._cli(*args, include_model=include_model, stdin=stdin)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'config', '--model', 'testing', 's3-integrator', 'endpoint=https://s3.amazonaws.com', 'bucket=data-charms-testing', 'path=mysql-k8s/a9ea3cac-6321-4164-956a-c6408fac574b', 'region=us-east-1']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR application \"s3-integrator\" not found","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"cloud_configs_aws","time":{"start":1768961410347,"stop":1768961410347,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets","time":{"start":1768961410348,"stop":1768961410348,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1768961410348,"stop":1768961410648,"duration":300},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1768961535246,"stop":1768961535246,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to restore a backup to the same mysql cluster.","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'config', '--model', 'testing', 's3-integrator', 'endpoint=https://s3.amazonaws.com', 'bucket=data-charms-testing', 'path=mysql-k8s/a9ea3cac-6321-4164-956a-c6408fac574b', 'region=us-east-1']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR application \"s3-integrator\" not found","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/test_backup_aws.py\", line 224, in test_restore_on_same_cluster\n    juju.config(S3_INTEGRATOR, cloud_configs)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 385, in config\n    self.cli(*args)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 306, in cli\n    stdout, _ = self._cli(*args, include_model=include_model, stdin=stdin)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'config', '--model', 'testing', 's3-integrator', 'endpoint=https://s3.amazonaws.com', 'bucket=data-charms-testing', 'path=mysql-k8s/a9ea3cac-6321-4164-956a-c6408fac574b', 'region=us-east-1']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR application \"s3-integrator\" not found","steps":[],"attachments":[{"uid":"5c7dc0ec9c4f7204","name":"log","source":"5c7dc0ec9c4f7204.txt","type":"text/plain","size":809}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1768961619612,"stop":1768961619612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1768961683107,"stop":1768961683336,"duration":229},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets::0","time":{"start":1768961683338,"stop":1768961683810,"duration":472},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration.integration"},{"name":"suite","value":"test_backup_aws"},{"name":"host","value":"runnervmmtnos"},{"name":"thread","value":"18902-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.integration.test_backup_aws"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"51d3750150477156","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":40,"unknown":0,"total":42},"items":[{"uid":"90b8be4b112ddbb9","reportUrl":"../69//#testresult/90b8be4b112ddbb9","status":"passed","time":{"start":1768874437361,"stop":1768874635491,"duration":198130}},{"uid":"6fd3d2d748d62322","reportUrl":"../68//#testresult/6fd3d2d748d62322","status":"passed","time":{"start":1768787014856,"stop":1768787216544,"duration":201688}},{"uid":"dc69b04898340c18","reportUrl":"../67//#testresult/dc69b04898340c18","status":"passed","time":{"start":1768700608425,"stop":1768700826274,"duration":217849}},{"uid":"c4ddcfed6623ba14","reportUrl":"../65//#testresult/c4ddcfed6623ba14","status":"broken","statusDetails":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","time":{"start":1768527920477,"stop":1768527921613,"duration":1136}},{"uid":"fa850c5e02b95fe8","reportUrl":"../64//#testresult/fa850c5e02b95fe8","status":"passed","time":{"start":1768443788444,"stop":1768443981736,"duration":193292}},{"uid":"d5a3f38fb3d3b705","reportUrl":"../63//#testresult/d5a3f38fb3d3b705","status":"passed","time":{"start":1768356756881,"stop":1768356936811,"duration":179930}},{"uid":"ff07b08a237b0ffb","reportUrl":"../61//#testresult/ff07b08a237b0ffb","status":"passed","time":{"start":1768182519539,"stop":1768182728688,"duration":209149}},{"uid":"e7592c7908ccf763","reportUrl":"../60//#testresult/e7592c7908ccf763","status":"passed","time":{"start":1768096124609,"stop":1768096306855,"duration":182246}},{"uid":"3cbbaa0b6238bb07","reportUrl":"../59//#testresult/3cbbaa0b6238bb07","status":"passed","time":{"start":1768010665220,"stop":1768010845465,"duration":180245}},{"uid":"c998ca927a6c852a","reportUrl":"../58//#testresult/c998ca927a6c852a","status":"passed","time":{"start":1767923700765,"stop":1767923900586,"duration":199821}},{"uid":"7059eca871031656","reportUrl":"../56//#testresult/7059eca871031656","status":"passed","time":{"start":1767751132994,"stop":1767751343945,"duration":210951}},{"uid":"21951189f8c55e5b","reportUrl":"../55//#testresult/21951189f8c55e5b","status":"passed","time":{"start":1767663874111,"stop":1767664112575,"duration":238464}},{"uid":"59cadb4af9e9824c","reportUrl":"../54//#testresult/59cadb4af9e9824c","status":"passed","time":{"start":1767578512090,"stop":1767578749136,"duration":237046}},{"uid":"8fe8b023d81a4f0e","reportUrl":"../53//#testresult/8fe8b023d81a4f0e","status":"passed","time":{"start":1767492255352,"stop":1767492497716,"duration":242364}},{"uid":"eb24f1fd04456a11","reportUrl":"../52//#testresult/eb24f1fd04456a11","status":"passed","time":{"start":1767404754374,"stop":1767404985249,"duration":230875}},{"uid":"802bcfa746a0292a","reportUrl":"../51//#testresult/802bcfa746a0292a","status":"passed","time":{"start":1767318481077,"stop":1767318696954,"duration":215877}},{"uid":"fff3ae783a26b507","reportUrl":"../50//#testresult/fff3ae783a26b507","status":"passed","time":{"start":1767232019023,"stop":1767232247492,"duration":228469}},{"uid":"a7e70acaeca31832","reportUrl":"../49//#testresult/a7e70acaeca31832","status":"passed","time":{"start":1767145660271,"stop":1767145856854,"duration":196583}},{"uid":"86139476894d938f","reportUrl":"../48//#testresult/86139476894d938f","status":"passed","time":{"start":1767059198021,"stop":1767059438394,"duration":240373}},{"uid":"ebb7ec8401c71ef0","reportUrl":"../47//#testresult/ebb7ec8401c71ef0","status":"passed","time":{"start":1766973061007,"stop":1766973279738,"duration":218731}}]},"tags":["abort_on_fail"]},"source":"18f1a9f19560f276.json","parameterValues":[]}