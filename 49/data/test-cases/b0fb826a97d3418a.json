{"uid":"b0fb826a97d3418a","name":"test_build_and_deploy","fullName":"tests.integration.integration.roles.test_instance_roles#test_build_and_deploy","historyId":"78755f7c0a327e6f49983eb6d70781f4","time":{"start":1767145549747,"stop":1767145621212,"duration":71465},"description":"Simple test to ensure that the mysql and data-integrator charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and data-integrator charms get deployed.</p>\n","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/roles/test_instance_roles.py\", line 54, in test_build_and_deploy\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"charm","time":{"start":1767145549451,"stop":1767145549452,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1767145549452,"stop":1767145549746,"duration":294},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1767145549746,"stop":1767145549746,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and data-integrator charms get deployed.","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/roles/test_instance_roles.py\", line 54, in test_build_and_deploy\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","steps":[],"attachments":[{"uid":"c213f8b6c3d26e3b","name":"log","source":"c213f8b6c3d26e3b.txt","type":"text/plain","size":645}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1767145621216,"stop":1767145621216,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1767145736342,"stop":1767145736905,"duration":563},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration.integration.roles"},{"name":"suite","value":"test_instance_roles"},{"name":"host","value":"runnervmh13bl"},{"name":"thread","value":"18804-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.integration.roles.test_instance_roles"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c47dfb1ab276579a","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":23,"unknown":0,"total":24},"items":[{"uid":"f985e47ea5ed378","reportUrl":"../48//#testresult/f985e47ea5ed378","status":"passed","time":{"start":1767059035838,"stop":1767059173953,"duration":138115}},{"uid":"cb9f0e12b9fe50c8","reportUrl":"../47//#testresult/cb9f0e12b9fe50c8","status":"passed","time":{"start":1766972839060,"stop":1766972977055,"duration":137995}},{"uid":"8faf201fdf6409c7","reportUrl":"../46//#testresult/8faf201fdf6409c7","status":"passed","time":{"start":1766886119903,"stop":1766886257415,"duration":137512}},{"uid":"6def2a276c0d15a0","reportUrl":"../45//#testresult/6def2a276c0d15a0","status":"passed","time":{"start":1766800149852,"stop":1766800272262,"duration":122410}},{"uid":"30f70b02bb7ca640","reportUrl":"../44//#testresult/30f70b02bb7ca640","status":"passed","time":{"start":1766713340813,"stop":1766713469010,"duration":128197}},{"uid":"2dbdc3eb9d4e55b8","reportUrl":"../43//#testresult/2dbdc3eb9d4e55b8","status":"passed","time":{"start":1766627302775,"stop":1766627442527,"duration":139752}},{"uid":"1dea4684273c2d","reportUrl":"../42//#testresult/1dea4684273c2d","status":"passed","time":{"start":1766540836274,"stop":1766540961306,"duration":125032}},{"uid":"a256c78710e4df9d","reportUrl":"../41//#testresult/a256c78710e4df9d","status":"passed","time":{"start":1766453953677,"stop":1766454069653,"duration":115976}},{"uid":"446a57f8f0a43fe8","reportUrl":"../40//#testresult/446a57f8f0a43fe8","status":"passed","time":{"start":1766367777787,"stop":1766367913092,"duration":135305}},{"uid":"dca68c0f8e70adb1","reportUrl":"../39//#testresult/dca68c0f8e70adb1","status":"passed","time":{"start":1766281470954,"stop":1766281596941,"duration":125987}},{"uid":"901cc37a040a7e98","reportUrl":"../38//#testresult/901cc37a040a7e98","status":"passed","time":{"start":1766195050785,"stop":1766195177791,"duration":127006}},{"uid":"6570f3773c01cca2","reportUrl":"../37//#testresult/6570f3773c01cca2","status":"passed","time":{"start":1766109995031,"stop":1766110126793,"duration":131762}},{"uid":"f113b5d7ac24ac33","reportUrl":"../36//#testresult/f113b5d7ac24ac33","status":"passed","time":{"start":1766022731431,"stop":1766022861009,"duration":129578}},{"uid":"61dd60749e7429f2","reportUrl":"../35//#testresult/61dd60749e7429f2","status":"passed","time":{"start":1765936363287,"stop":1765936493292,"duration":130005}},{"uid":"5a49d2ecefcc4d6f","reportUrl":"../34//#testresult/5a49d2ecefcc4d6f","status":"passed","time":{"start":1765850269752,"stop":1765850396275,"duration":126523}},{"uid":"4d266fff91502053","reportUrl":"../33//#testresult/4d266fff91502053","status":"passed","time":{"start":1765785361169,"stop":1765785496109,"duration":134940}},{"uid":"48530b13c291fc74","reportUrl":"../31//#testresult/48530b13c291fc74","status":"passed","time":{"start":1765590348957,"stop":1765590491387,"duration":142430}},{"uid":"6ee9327178cb6cf1","reportUrl":"../30//#testresult/6ee9327178cb6cf1","status":"passed","time":{"start":1765503902911,"stop":1765504028196,"duration":125285}},{"uid":"89922b912831ec56","reportUrl":"../29//#testresult/89922b912831ec56","status":"passed","time":{"start":1765419001399,"stop":1765419121400,"duration":120001}},{"uid":"52ce2c91db08788b","reportUrl":"../26//#testresult/52ce2c91db08788b","status":"passed","time":{"start":1765161115080,"stop":1765161255511,"duration":140431}}]},"tags":["abort_on_fail"]},"source":"b0fb826a97d3418a.json","parameterValues":[]}