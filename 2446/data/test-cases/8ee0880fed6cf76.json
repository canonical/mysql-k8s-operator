{"uid":"8ee0880fed6cf76","name":"test_standby_promotion","fullName":"tests.integration.high_availability.test_async_replication#test_standby_promotion","historyId":"f50f2b7aa9d6f0ad1d763cacd40981bf","time":{"start":1732498618904,"stop":1732498641338,"duration":22434},"description":"Test graceful promotion of a standby cluster to primary.","descriptionHtml":"<p>Test graceful promotion of a standby cluster to primary.</p>\n","status":"failed","statusMessage":"AssertionError: standby not promoted to primary\nassert 'replica' == 'primary'\n  - primary\n  + replica","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_async_replication.py\", line 264, in test_standby_promotion\n    assert (\nAssertionError: standby not promoted to primary\nassert 'replica' == 'primary'\n  - primary\n  + replica","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1732498083861,"stop":1732498083861,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1732498083861,"stop":1732498083861,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1732498083862,"stop":1732498084137,"duration":275},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1732498084138,"stop":1732498084138,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1732498084138,"stop":1732498084773,"duration":635},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1732498616857,"stop":1732498616857,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1732498616858,"stop":1732498618903,"duration":2045},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test graceful promotion of a standby cluster to primary.","status":"failed","statusMessage":"AssertionError: standby not promoted to primary\nassert 'replica' == 'primary'\n  - primary\n  + replica","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_async_replication.py\", line 264, in test_standby_promotion\n    assert (\nAssertionError: standby not promoted to primary\nassert 'replica' == 'primary'\n  - primary\n  + replica","steps":[],"attachments":[{"uid":"90800292d5e094d8","name":"log","source":"90800292d5e094d8.txt","type":"text/plain","size":851}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1732498641370,"stop":1732498642395,"duration":1025},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1732498642395,"stop":1732498642395,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::finalizer","time":{"start":1732498642404,"stop":1732498642421,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1732498642422,"stop":1732498643474,"duration":1052},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1732498643482,"stop":1732498643483,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1732498643483,"stop":1732498643483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1732498643483,"stop":1732498643483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"fv-az1532-386"},{"name":"thread","value":"13124-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"d9ed3cd5153fb4d4","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":20,"passed":190,"unknown":2,"total":214},"items":[{"uid":"46be2758c30e62d0","reportUrl":"../2444//#testresult/46be2758c30e62d0","status":"passed","time":{"start":1732412273150,"stop":1732412295563,"duration":22413}},{"uid":"5920219427a1e25c","reportUrl":"../2443//#testresult/5920219427a1e25c","status":"passed","time":{"start":1732325981299,"stop":1732326006066,"duration":24767}},{"uid":"7618c2048412c6a3","reportUrl":"../2442//#testresult/7618c2048412c6a3","status":"passed","time":{"start":1732239445954,"stop":1732239466379,"duration":20425}},{"uid":"edec471ba7f945c2","reportUrl":"../2440//#testresult/edec471ba7f945c2","status":"passed","time":{"start":1732153122598,"stop":1732153149051,"duration":26453}},{"uid":"5bbc48f15786d89f","reportUrl":"../2437//#testresult/5bbc48f15786d89f","status":"passed","time":{"start":1732066646754,"stop":1732066667179,"duration":20425}},{"uid":"7b5ed902518ae669","reportUrl":"../2434//#testresult/7b5ed902518ae669","status":"passed","time":{"start":1731980258494,"stop":1731980278845,"duration":20351}},{"uid":"158c47b78e5f0716","reportUrl":"../2430//#testresult/158c47b78e5f0716","status":"passed","time":{"start":1731893876126,"stop":1731893899614,"duration":23488}},{"uid":"92ae3e1eb87def7d","reportUrl":"../2429//#testresult/92ae3e1eb87def7d","status":"passed","time":{"start":1731807478424,"stop":1731807508975,"duration":30551}},{"uid":"8272dc93e3c068d8","reportUrl":"../2428//#testresult/8272dc93e3c068d8","status":"passed","time":{"start":1731721375308,"stop":1731721404809,"duration":29501}},{"uid":"efb1ef7dc28024b6","reportUrl":"../2426//#testresult/efb1ef7dc28024b6","status":"passed","time":{"start":1731634698241,"stop":1731634718642,"duration":20401}},{"uid":"7e8542d1d010723e","reportUrl":"../2421//#testresult/7e8542d1d010723e","status":"passed","time":{"start":1731548295835,"stop":1731548321238,"duration":25403}},{"uid":"fa724f48e1fc9bea","reportUrl":"../2418//#testresult/fa724f48e1fc9bea","status":"passed","time":{"start":1731375667034,"stop":1731375694504,"duration":27470}},{"uid":"ea6bc4011b412e34","reportUrl":"../2415//#testresult/ea6bc4011b412e34","status":"passed","time":{"start":1731289217970,"stop":1731289244359,"duration":26389}},{"uid":"47151e59f9866daa","reportUrl":"../2414//#testresult/47151e59f9866daa","status":"passed","time":{"start":1731202904642,"stop":1731202926346,"duration":21704}},{"uid":"2dae4e6037fbfae5","reportUrl":"../2413//#testresult/2dae4e6037fbfae5","status":"passed","time":{"start":1731116404001,"stop":1731116426523,"duration":22522}},{"uid":"c8cc60d5d41c28a3","reportUrl":"../2412//#testresult/c8cc60d5d41c28a3","status":"unknown","time":{}},{"uid":"4cb37f64357556cd","reportUrl":"../2410//#testresult/4cb37f64357556cd","status":"passed","time":{"start":1730943702331,"stop":1730943729842,"duration":27511}},{"uid":"b9b4644f1891e01d","reportUrl":"../2409//#testresult/b9b4644f1891e01d","status":"passed","time":{"start":1730857309486,"stop":1730857331889,"duration":22403}},{"uid":"3d8e5d30deccfede","reportUrl":"../2408//#testresult/3d8e5d30deccfede","status":"passed","time":{"start":1730770854234,"stop":1730770883718,"duration":29484}},{"uid":"4c8b5a42c6934db3","reportUrl":"../2406//#testresult/4c8b5a42c6934db3","status":"passed","time":{"start":1730684567245,"stop":1730684587678,"duration":20433}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires amd64 architecture')","group(1)"]},"source":"8ee0880fed6cf76.json","parameterValues":[]}