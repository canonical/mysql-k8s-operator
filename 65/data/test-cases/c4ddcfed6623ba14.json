{"uid":"c4ddcfed6623ba14","name":"test_restore_on_same_cluster","fullName":"tests.integration.integration.test_backup_aws#test_restore_on_same_cluster","historyId":"b663bd0e26688ae044fa3c32270e0dbd","time":{"start":1768527920477,"stop":1768527921613,"duration":1136},"description":"Test to restore a backup to the same mysql cluster.","descriptionHtml":"<p>Test to restore a backup to the same mysql cluster.</p>\n","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/test_backup_aws.py\", line 218, in test_restore_on_same_cluster\n    scale_app_units(juju, DATABASE_APP_NAME, 1)\n  File \"/root/spread_project/tests/integration/helpers_ha.py\", line 267, in scale_app_units\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"cloud_configs_aws","time":{"start":1768527727871,"stop":1768527727871,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju","time":{"start":1768527727871,"stop":1768527728214,"duration":343},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets","time":{"start":1768527727871,"stop":1768527727871,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1768527920477,"stop":1768527920477,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to restore a backup to the same mysql cluster.","status":"broken","statusMessage":"jubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/integration/test_backup_aws.py\", line 218, in test_restore_on_same_cluster\n    scale_app_units(juju, DATABASE_APP_NAME, 1)\n  File \"/root/spread_project/tests/integration/helpers_ha.py\", line 267, in scale_app_units\n    juju.wait(\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 1356, in wait\n    stdout, _ = self._cli('status', '--format', 'json', log=False)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 326, in _cli\n    raise CLIError(e.returncode, e.cmd, e.stdout, e.stderr) from None\njubilant_backports._juju.CLIError: Command '['juju', 'status', '--model', 'testing', '--format', 'json']' returned non-zero exit status 1.\nStdout:\n{}\n\nStderr:\nERROR connection is shut down","steps":[],"attachments":[{"uid":"6d0201864fb0cc82","name":"log","source":"6d0201864fb0cc82.txt","type":"text/plain","size":317}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1768527921621,"stop":1768527921621,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1768528278348,"stop":1768528278604,"duration":256},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets::0","time":{"start":1768528278605,"stop":1768528279036,"duration":431},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"parentSuite","value":"tests.integration.integration"},{"name":"suite","value":"test_backup_aws"},{"name":"host","value":"runnervmmtnos"},{"name":"thread","value":"18572-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.integration.test_backup_aws"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c8bf5764f68318df","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":37,"unknown":0,"total":38},"items":[{"uid":"fa850c5e02b95fe8","reportUrl":"../64//#testresult/fa850c5e02b95fe8","status":"passed","time":{"start":1768443788444,"stop":1768443981736,"duration":193292}},{"uid":"d5a3f38fb3d3b705","reportUrl":"../63//#testresult/d5a3f38fb3d3b705","status":"passed","time":{"start":1768356756881,"stop":1768356936811,"duration":179930}},{"uid":"ff07b08a237b0ffb","reportUrl":"../61//#testresult/ff07b08a237b0ffb","status":"passed","time":{"start":1768182519539,"stop":1768182728688,"duration":209149}},{"uid":"e7592c7908ccf763","reportUrl":"../60//#testresult/e7592c7908ccf763","status":"passed","time":{"start":1768096124609,"stop":1768096306855,"duration":182246}},{"uid":"3cbbaa0b6238bb07","reportUrl":"../59//#testresult/3cbbaa0b6238bb07","status":"passed","time":{"start":1768010665220,"stop":1768010845465,"duration":180245}},{"uid":"c998ca927a6c852a","reportUrl":"../58//#testresult/c998ca927a6c852a","status":"passed","time":{"start":1767923700765,"stop":1767923900586,"duration":199821}},{"uid":"7059eca871031656","reportUrl":"../56//#testresult/7059eca871031656","status":"passed","time":{"start":1767751132994,"stop":1767751343945,"duration":210951}},{"uid":"21951189f8c55e5b","reportUrl":"../55//#testresult/21951189f8c55e5b","status":"passed","time":{"start":1767663874111,"stop":1767664112575,"duration":238464}},{"uid":"59cadb4af9e9824c","reportUrl":"../54//#testresult/59cadb4af9e9824c","status":"passed","time":{"start":1767578512090,"stop":1767578749136,"duration":237046}},{"uid":"8fe8b023d81a4f0e","reportUrl":"../53//#testresult/8fe8b023d81a4f0e","status":"passed","time":{"start":1767492255352,"stop":1767492497716,"duration":242364}},{"uid":"eb24f1fd04456a11","reportUrl":"../52//#testresult/eb24f1fd04456a11","status":"passed","time":{"start":1767404754374,"stop":1767404985249,"duration":230875}},{"uid":"802bcfa746a0292a","reportUrl":"../51//#testresult/802bcfa746a0292a","status":"passed","time":{"start":1767318481077,"stop":1767318696954,"duration":215877}},{"uid":"fff3ae783a26b507","reportUrl":"../50//#testresult/fff3ae783a26b507","status":"passed","time":{"start":1767232019023,"stop":1767232247492,"duration":228469}},{"uid":"a7e70acaeca31832","reportUrl":"../49//#testresult/a7e70acaeca31832","status":"passed","time":{"start":1767145660271,"stop":1767145856854,"duration":196583}},{"uid":"86139476894d938f","reportUrl":"../48//#testresult/86139476894d938f","status":"passed","time":{"start":1767059198021,"stop":1767059438394,"duration":240373}},{"uid":"ebb7ec8401c71ef0","reportUrl":"../47//#testresult/ebb7ec8401c71ef0","status":"passed","time":{"start":1766973061007,"stop":1766973279738,"duration":218731}},{"uid":"fa7572f9bbea7f10","reportUrl":"../46//#testresult/fa7572f9bbea7f10","status":"passed","time":{"start":1766886238480,"stop":1766886459862,"duration":221382}},{"uid":"45e27eac6ba842f0","reportUrl":"../45//#testresult/45e27eac6ba842f0","status":"passed","time":{"start":1766800151367,"stop":1766800360929,"duration":209562}},{"uid":"e299de9cbb54d821","reportUrl":"../44//#testresult/e299de9cbb54d821","status":"passed","time":{"start":1766713393490,"stop":1766713611816,"duration":218326}},{"uid":"73d93f6707281023","reportUrl":"../43//#testresult/73d93f6707281023","status":"passed","time":{"start":1766627454969,"stop":1766627669739,"duration":214770}}]},"tags":["abort_on_fail"]},"source":"c4ddcfed6623ba14.json","parameterValues":[]}