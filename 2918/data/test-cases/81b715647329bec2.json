{"uid":"81b715647329bec2","name":"test_graceful_full_cluster_crash_test","fullName":"tests.integration.high_availability.test_self_healing_stop_all#test_graceful_full_cluster_crash_test","historyId":"7d02ac8c8300bc817c84cf65fe597430","time":{"start":1745631154918,"stop":1745631505405,"duration":350487},"description":"Test to send SIGTERM to all units and then ensure that the cluster recovers.","descriptionHtml":"<p>Test to send SIGTERM to all units and then ensure that the cluster recovers.</p>\n","status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f0fda42b800 state=finished raised AssertionError>]","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 62, in test_graceful_full_cluster_crash_test\n    await ensure_process_not_running(\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 577, in ensure_process_not_running\n    return_code != 0\nAssertionError: Process mysqld is still running with pid 895\n on unit mysql-k8s/0, container mysql\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 59, in test_graceful_full_cluster_crash_test\n    for attempt in Retrying(stop=stop_after_delay(300), wait=wait_fixed(30)):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 435, in __iter__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 368, in iter\n    result = action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 411, in exc_check\n    raise retry_exc from fut.exception()\ntenacity.RetryError: RetryError[<Future at 0x7f0fda42b800 state=finished raised AssertionError>]","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1745630926825,"stop":1745630926826,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1745630926826,"stop":1745630927024,"duration":198},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1745630926826,"stop":1745630926826,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"charm","time":{"start":1745630926826,"stop":1745630926826,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster","time":{"start":1745630927024,"stop":1745631150848,"duration":223824},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1745631150848,"stop":1745631150848,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1745631150848,"stop":1745631152893,"duration":2045},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"credentials","time":{"start":1745631152893,"stop":1745631154917,"duration":2024},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to send SIGTERM to all units and then ensure that the cluster recovers.","status":"broken","statusMessage":"tenacity.RetryError: RetryError[<Future at 0x7f0fda42b800 state=finished raised AssertionError>]","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 62, in test_graceful_full_cluster_crash_test\n    await ensure_process_not_running(\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers.py\", line 577, in ensure_process_not_running\n    return_code != 0\nAssertionError: Process mysqld is still running with pid 895\n on unit mysql-k8s/0, container mysql\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_self_healing_stop_all.py\", line 59, in test_graceful_full_cluster_crash_test\n    for attempt in Retrying(stop=stop_after_delay(300), wait=wait_fixed(30)):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 435, in __iter__\n    do = self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 368, in iter\n    result = action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/tenacity/__init__.py\", line 411, in exc_check\n    raise retry_exc from fut.exception()\ntenacity.RetryError: RetryError[<Future at 0x7f0fda42b800 state=finished raised AssertionError>]","steps":[],"attachments":[{"uid":"50157bf09c0cdc86","name":"log","source":"50157bf09c0cdc86.txt","type":"text/plain","size":35950}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"credentials::finalizer","time":{"start":1745631505440,"stop":1745631505440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes::finalizer","time":{"start":1745631505440,"stop":1745631506467,"duration":1027},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1745631506468,"stop":1745631506468,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster::finalizer","time":{"start":1745631506468,"stop":1745631506468,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1745631506469,"stop":1745631506769,"duration":300},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1745631506770,"stop":1745631506770,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1745631506770,"stop":1745631506770,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1745631506770,"stop":1745631506770,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_self_healing_stop_all"},{"name":"host","value":"fv-az1705-286"},{"name":"thread","value":"15441-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_self_healing_stop_all"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"12e877ac513720d7","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":58,"unknown":0,"total":59},"items":[{"uid":"8e49cb6e5f6b4136","reportUrl":"../2917//#testresult/8e49cb6e5f6b4136","status":"passed","time":{"start":1745544764518,"stop":1745545067589,"duration":303071}},{"uid":"68e34d62d0fd8dfa","reportUrl":"../2916//#testresult/68e34d62d0fd8dfa","status":"passed","time":{"start":1745458323182,"stop":1745458610804,"duration":287622}},{"uid":"b925ef3189aceeac","reportUrl":"../2915//#testresult/b925ef3189aceeac","status":"passed","time":{"start":1745371956666,"stop":1745372269697,"duration":313031}},{"uid":"a11b0b19c8ef9da3","reportUrl":"../2911//#testresult/a11b0b19c8ef9da3","status":"passed","time":{"start":1745285491257,"stop":1745285757760,"duration":266503}},{"uid":"eb964388899822a5","reportUrl":"../2910//#testresult/eb964388899822a5","status":"passed","time":{"start":1745199093532,"stop":1745199417752,"duration":324220}},{"uid":"d3db66aef1b3b173","reportUrl":"../2909//#testresult/d3db66aef1b3b173","status":"passed","time":{"start":1745112750736,"stop":1745113087777,"duration":337041}},{"uid":"aa4330ea9b765976","reportUrl":"../2908//#testresult/aa4330ea9b765976","status":"passed","time":{"start":1745026282958,"stop":1745026571312,"duration":288354}},{"uid":"56b5e4f67a59c73e","reportUrl":"../2907//#testresult/56b5e4f67a59c73e","status":"passed","time":{"start":1744939923856,"stop":1744940232723,"duration":308867}},{"uid":"4875c74015aba8cd","reportUrl":"../2906//#testresult/4875c74015aba8cd","status":"passed","time":{"start":1744853510253,"stop":1744853817670,"duration":307417}},{"uid":"b5641a262fea0564","reportUrl":"../2905//#testresult/b5641a262fea0564","status":"passed","time":{"start":1744767110614,"stop":1744767418373,"duration":307759}},{"uid":"3754de477e05af5d","reportUrl":"../2901//#testresult/3754de477e05af5d","status":"passed","time":{"start":1744680741102,"stop":1744681120256,"duration":379154}},{"uid":"f38e0bfd4f499451","reportUrl":"../2897//#testresult/f38e0bfd4f499451","status":"passed","time":{"start":1744335081063,"stop":1744335393325,"duration":312262}},{"uid":"c8fc957f3dd43d0","reportUrl":"../2896//#testresult/c8fc957f3dd43d0","status":"passed","time":{"start":1744248691165,"stop":1744249022335,"duration":331170}},{"uid":"3ee1c30275386e84","reportUrl":"../2895//#testresult/3ee1c30275386e84","status":"passed","time":{"start":1744162343292,"stop":1744162677747,"duration":334455}},{"uid":"b62b7a959207bf7","reportUrl":"../2889//#testresult/b62b7a959207bf7","status":"passed","time":{"start":1744075888219,"stop":1744076290099,"duration":401880}},{"uid":"41c02d4e7f74794b","reportUrl":"../2888//#testresult/41c02d4e7f74794b","status":"passed","time":{"start":1743989602566,"stop":1743989948000,"duration":345434}},{"uid":"d5f0a2a511943206","reportUrl":"../2887//#testresult/d5f0a2a511943206","status":"passed","time":{"start":1743903111718,"stop":1743903352432,"duration":240714}},{"uid":"df153fc1e56d16bf","reportUrl":"../2886//#testresult/df153fc1e56d16bf","status":"passed","time":{"start":1743816716629,"stop":1743817017881,"duration":301252}},{"uid":"f7736e72f325734e","reportUrl":"../2885//#testresult/f7736e72f325734e","status":"passed","time":{"start":1743730341180,"stop":1743730621204,"duration":280024}},{"uid":"b81d454834233d27","reportUrl":"../2884//#testresult/b81d454834233d27","status":"passed","time":{"start":1743643948391,"stop":1743644294358,"duration":345967}}]},"tags":["asyncio"]},"source":"81b715647329bec2.json","parameterValues":[]}