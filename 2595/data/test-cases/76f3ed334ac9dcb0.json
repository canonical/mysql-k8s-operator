{"uid":"76f3ed334ac9dcb0","name":"test_log_rotation","fullName":"tests.integration.high_availability.test_log_rotation#test_log_rotation","historyId":"9e999cdbfb33f46372fd11cce7bf58b9","time":{"start":1737077518990,"stop":1737077527759,"duration":8769},"description":"Test the log rotation of text files.\n\n    Run continuous writes to ensure that audit log plugin is loaded and active\n    when mysql-test-app runs start-continuous-writes (by logging into mysql).\n    ","descriptionHtml":"<p>Test the log rotation of text files.</p>\n<pre><code>Run continuous writes to ensure that audit log plugin is loaded and active\nwhen mysql-test-app runs start-continuous-writes (by logging into mysql).\n</code></pre>\n","status":"failed","statusMessage":"AssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_log_rotation.py\", line 113, in test_log_rotation\n    assert f\"test {log} content\" not in file_contents, f\"❌ log file {log}.log not rotated\"\nAssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1737077298228,"stop":1737077298228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1737077298228,"stop":1737077298228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1737077298229,"stop":1737077298441,"duration":212},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster","time":{"start":1737077298442,"stop":1737077516943,"duration":218501},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1737077516943,"stop":1737077516943,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1737077516943,"stop":1737077518989,"duration":2046},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test the log rotation of text files.\n\n    Run continuous writes to ensure that audit log plugin is loaded and active\n    when mysql-test-app runs start-continuous-writes (by logging into mysql).\n    ","status":"failed","statusMessage":"AssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.12/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.12/asyncio/base_events.py\", line 687, in run_until_complete\n    return future.result()\n           ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_log_rotation.py\", line 113, in test_log_rotation\n    assert f\"test {log} content\" not in file_contents, f\"❌ log file {log}.log not rotated\"\nAssertionError: ❌ log file general.log not rotated\nassert 'test general content' not in 'test general content\\n\\n'\n  'test general content' is contained here:\n  Strings contain only whitespace, escaping them using repr()\n    'test general content\\n\\n'","steps":[],"attachments":[{"uid":"655f739f08351c52","name":"log","source":"655f739f08351c52.txt","type":"text/plain","size":4997}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::finalizer","time":{"start":1737077527841,"stop":1737077528873,"duration":1032},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1737077528874,"stop":1737077528874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"highly_available_cluster::finalizer","time":{"start":1737077528874,"stop":1737077528874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1737077528875,"stop":1737077529227,"duration":352},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1737077529228,"stop":1737077529228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1737077529228,"stop":1737077529228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1737077529228,"stop":1737077529228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_log_rotation"},{"name":"host","value":"fv-az1910-955"},{"name":"thread","value":"16153-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_log_rotation"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"63363f880deee8ae","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":109,"unknown":4,"total":118},"items":[{"uid":"e58cc289e147803","reportUrl":"../2587//#testresult/e58cc289e147803","status":"passed","time":{"start":1736991141859,"stop":1736991151898,"duration":10039}},{"uid":"bef707550bc2891b","reportUrl":"../2578//#testresult/bef707550bc2891b","status":"passed","time":{"start":1736904685493,"stop":1736904695554,"duration":10061}},{"uid":"866e53643deedcec","reportUrl":"../2573//#testresult/866e53643deedcec","status":"passed","time":{"start":1736818321389,"stop":1736818331527,"duration":10138}},{"uid":"f9b445c937cc9ae0","reportUrl":"../2570//#testresult/f9b445c937cc9ae0","status":"passed","time":{"start":1736731891534,"stop":1736731901432,"duration":9898}},{"uid":"297f63def1283ca9","reportUrl":"../2569//#testresult/297f63def1283ca9","status":"passed","time":{"start":1736645540788,"stop":1736645550351,"duration":9563}},{"uid":"8fb4a771fbe31bf9","reportUrl":"../2567//#testresult/8fb4a771fbe31bf9","status":"passed","time":{"start":1736559117303,"stop":1736559127948,"duration":10645}},{"uid":"a02b9b482e950f03","reportUrl":"../2562//#testresult/a02b9b482e950f03","status":"passed","time":{"start":1736472716211,"stop":1736472727642,"duration":11431}},{"uid":"f7d07ee968b5f878","reportUrl":"../2539//#testresult/f7d07ee968b5f878","status":"passed","time":{"start":1735867940907,"stop":1735867950322,"duration":9415}},{"uid":"b7b96dede56089e3","reportUrl":"../2538//#testresult/b7b96dede56089e3","status":"passed","time":{"start":1735781501518,"stop":1735781511342,"duration":9824}},{"uid":"758409587f8d5063","reportUrl":"../2537//#testresult/758409587f8d5063","status":"passed","time":{"start":1735695148593,"stop":1735695157900,"duration":9307}},{"uid":"fd8e3711100eb7ca","reportUrl":"../2536//#testresult/fd8e3711100eb7ca","status":"passed","time":{"start":1735608712531,"stop":1735608723260,"duration":10729}},{"uid":"c495eb170ce3146d","reportUrl":"../2534//#testresult/c495eb170ce3146d","status":"passed","time":{"start":1735522287722,"stop":1735522296786,"duration":9064}},{"uid":"970c69ec596a3658","reportUrl":"../2533//#testresult/970c69ec596a3658","status":"passed","time":{"start":1735435940349,"stop":1735435949712,"duration":9363}},{"uid":"6ede924505dac296","reportUrl":"../2532//#testresult/6ede924505dac296","status":"passed","time":{"start":1735349496000,"stop":1735349505301,"duration":9301}},{"uid":"b38bf14a5bf1ed38","reportUrl":"../2530//#testresult/b38bf14a5bf1ed38","status":"passed","time":{"start":1735263140520,"stop":1735263149803,"duration":9283}},{"uid":"1dbc6992120eea44","reportUrl":"../2529//#testresult/1dbc6992120eea44","status":"passed","time":{"start":1735176680773,"stop":1735176690258,"duration":9485}},{"uid":"9245515fd8da7c11","reportUrl":"../2528//#testresult/9245515fd8da7c11","status":"passed","time":{"start":1735090305825,"stop":1735090315319,"duration":9494}},{"uid":"1f9747230654900b","reportUrl":"../2526//#testresult/1f9747230654900b","status":"failed","statusDetails":"AssertionError: ❌ files other than log files exist []\nassert ('error.log' in [] or 'error.log' == 'audit.log'\n  - audit.log\n  + error.log)","time":{"start":1735003917878,"stop":1735003922894,"duration":5016}},{"uid":"a5554a9168a138ec","reportUrl":"../2521//#testresult/a5554a9168a138ec","status":"passed","time":{"start":1734917560746,"stop":1734917569968,"duration":9222}},{"uid":"3d9a4ff6169b059f","reportUrl":"../2520//#testresult/3d9a4ff6169b059f","status":"passed","time":{"start":1734831102792,"stop":1734831112315,"duration":9523}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"76f3ed334ac9dcb0.json","parameterValues":[]}