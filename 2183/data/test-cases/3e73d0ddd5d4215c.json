{"uid":"3e73d0ddd5d4215c","name":"test_deploy_stable","fullName":"tests.integration.high_availability.test_upgrade_from_stable#test_deploy_stable","historyId":"8161c716d3063228eb33c3e4b0007946","time":{"start":1723685389809,"stop":1723686293127,"duration":903318},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] maintenance: joining the cluster\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [idle] active: Primary","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_upgrade_from_stable.py\", line 54, in test_deploy_stable\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP_NAME)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 232, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2969, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] maintenance: joining the cluster\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [idle] active: Primary","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1723685389535,"stop":1723685389535,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1723685389535,"stop":1723685389808,"duration":273},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1723685389535,"stop":1723685389535,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1723685389809,"stop":1723685389809,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] maintenance: joining the cluster\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [idle] active: Primary","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_upgrade_from_stable.py\", line 54, in test_deploy_stable\n    await relate_mysql_and_application(ops_test, MYSQL_APP_NAME, TEST_APP_NAME)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 232, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2969, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] maintenance: joining the cluster\n  mysql-k8s/1 [idle] active: \n  mysql-k8s/2 [idle] active: Primary","steps":[],"attachments":[{"uid":"da8a6b702a675464","name":"log","source":"da8a6b702a675464.txt","type":"text/plain","size":6267}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1723686293158,"stop":1723686293158,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1723686293164,"stop":1723686293597,"duration":433},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1723686293597,"stop":1723686293598,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1723686293598,"stop":1723686293598,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1723686293598,"stop":1723686293598,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires amd64 architecture')"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_upgrade_from_stable"},{"name":"host","value":"fv-az1532-17"},{"name":"thread","value":"13004-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_upgrade_from_stable"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"1e9827a661e66c90","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":35,"skipped":6,"passed":147,"unknown":1,"total":189},"items":[{"uid":"ea8a7495800407ca","reportUrl":"../2178//#testresult/ea8a7495800407ca","status":"passed","time":{"start":1723599498907,"stop":1723599645686,"duration":146779}},{"uid":"386a8fd2fd1a4813","reportUrl":"../2173//#testresult/386a8fd2fd1a4813","status":"passed","time":{"start":1723513022196,"stop":1723513174781,"duration":152585}},{"uid":"e13dffaadd568203","reportUrl":"../2169//#testresult/e13dffaadd568203","status":"unknown","time":{}},{"uid":"89a39353b1d7ce72","reportUrl":"../2168//#testresult/89a39353b1d7ce72","status":"passed","time":{"start":1723340333476,"stop":1723340500161,"duration":166685}},{"uid":"f35410c722d3ac96","reportUrl":"../2167//#testresult/f35410c722d3ac96","status":"passed","time":{"start":1723253985389,"stop":1723254137776,"duration":152387}},{"uid":"601c2619acff6e4","reportUrl":"../2165//#testresult/601c2619acff6e4","status":"passed","time":{"start":1723167454273,"stop":1723167599258,"duration":144985}},{"uid":"8f782442ced016d2","reportUrl":"../2152//#testresult/8f782442ced016d2","status":"passed","time":{"start":1722994777052,"stop":1722994918090,"duration":141038}},{"uid":"b1c513682513b886","reportUrl":"../2146//#testresult/b1c513682513b886","status":"passed","time":{"start":1722908205363,"stop":1722908358001,"duration":152638}},{"uid":"88e737d8962e6034","reportUrl":"../2142//#testresult/88e737d8962e6034","status":"passed","time":{"start":1722822084577,"stop":1722822239202,"duration":154625}},{"uid":"af7d8037dc77c244","reportUrl":"../2140//#testresult/af7d8037dc77c244","status":"passed","time":{"start":1722735854357,"stop":1722736012835,"duration":158478}},{"uid":"6e74a97a5e4fe408","reportUrl":"../2136//#testresult/6e74a97a5e4fe408","status":"passed","time":{"start":1722562670998,"stop":1722562833339,"duration":162341}},{"uid":"b9027953a4a793cd","reportUrl":"../2134//#testresult/b9027953a4a793cd","status":"passed","time":{"start":1722476008947,"stop":1722476177732,"duration":168785}},{"uid":"564f5435cbc8a7df","reportUrl":"../2128//#testresult/564f5435cbc8a7df","status":"passed","time":{"start":1722389486658,"stop":1722389657790,"duration":171132}},{"uid":"d6f4a507a1130749","reportUrl":"../2126//#testresult/d6f4a507a1130749","status":"passed","time":{"start":1722303192710,"stop":1722303348730,"duration":156020}},{"uid":"44ac951d9b05826","reportUrl":"../2121//#testresult/44ac951d9b05826","status":"passed","time":{"start":1722216831634,"stop":1722216993490,"duration":161856}},{"uid":"3541421ce1e28e59","reportUrl":"../2120//#testresult/3541421ce1e28e59","status":"passed","time":{"start":1722130525879,"stop":1722130675215,"duration":149336}},{"uid":"3d718de629d19acc","reportUrl":"../2119//#testresult/3d718de629d19acc","status":"passed","time":{"start":1722043949368,"stop":1722044117984,"duration":168616}},{"uid":"83f8efd6d31d24a7","reportUrl":"../2112//#testresult/83f8efd6d31d24a7","status":"passed","time":{"start":1721957613675,"stop":1721957755792,"duration":142117}},{"uid":"bd62bb460d2e8d89","reportUrl":"../2105//#testresult/bd62bb460d2e8d89","status":"passed","time":{"start":1721871154706,"stop":1721871317748,"duration":163042}},{"uid":"aa35cae791b41778","reportUrl":"../2103//#testresult/aa35cae791b41778","status":"passed","time":{"start":1721785250762,"stop":1721785397827,"duration":147065}}]},"tags":["asyncio","abort_on_fail","@pytest.mark.skipif(False, reason='Requires amd64 architecture')","group(1)"]},"source":"3e73d0ddd5d4215c.json","parameterValues":[]}