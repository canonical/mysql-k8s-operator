{"uid":"5075bfe5013e0723","name":"test_data_replication","fullName":"tests.integration.high_availability.test_async_replication#test_data_replication","historyId":"6c6a39d1deef0f5c857c63ef8908d129","time":{"start":1759544166029,"stop":1759544245112,"duration":79083},"description":"Test to write to primary, and read the same data back from replicas.","descriptionHtml":"<p>Test to write to primary, and read the same data back from replicas.</p>\n","status":"broken","statusMessage":"TimeoutError: timed out waiting for action, stderr:\nRunning operation 1 with 1 task\n  - task 2 on unit-db2-0\n\nWaiting for task 2...\nERROR timed out waiting for results from: unit db2/0","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 214, in test_data_replication\n    results = get_mysql_max_written_values(first_model, second_model)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 411, in get_mysql_max_written_values\n    unit_max_value = get_mysql_max_written_value(model_2, MYSQL_APP_2, unit_name)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers_new.py\", line 262, in get_mysql_max_written_value\n    credentials_task = juju.run(\n                       ^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 458, in run\n    return super().run(unit, action, params, wait=wait)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 946, in run\n    raise TimeoutError(msg) from None\nTimeoutError: timed out waiting for action, stderr:\nRunning operation 1 with 1 task\n  - task 2 on unit-db2-0\n\nWaiting for task 2...\nERROR timed out waiting for results from: unit db2/0","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"juju","time":{"start":1759542694688,"stop":1759542694969,"duration":281},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model","time":{"start":1759542694969,"stop":1759542695220,"duration":251},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model","time":{"start":1759542694969,"stop":1759542694969,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1759544157158,"stop":1759544166029,"duration":8871},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1759544157158,"stop":1759544157158,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to write to primary, and read the same data back from replicas.","status":"broken","statusMessage":"TimeoutError: timed out waiting for action, stderr:\nRunning operation 1 with 1 task\n  - task 2 on unit-db2-0\n\nWaiting for task 2...\nERROR timed out waiting for results from: unit db2/0","statusTrace":"Traceback (most recent call last):\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n                                ^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n            ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 214, in test_data_replication\n    results = get_mysql_max_written_values(first_model, second_model)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/test_async_replication.py\", line 411, in get_mysql_max_written_values\n    unit_max_value = get_mysql_max_written_value(model_2, MYSQL_APP_2, unit_name)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/tests/integration/high_availability/high_availability_helpers_new.py\", line 262, in get_mysql_max_written_value\n    credentials_task = juju.run(\n                       ^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant_backports/_juju.py\", line 458, in run\n    return super().run(unit, action, params, wait=wait)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/root/spread_project/.tox/integration/lib/python3.12/site-packages/jubilant/_juju.py\", line 946, in run\n    raise TimeoutError(msg) from None\nTimeoutError: timed out waiting for action, stderr:\nRunning operation 1 with 1 task\n  - task 2 on unit-db2-0\n\nWaiting for task 2...\nERROR timed out waiting for results from: unit db2/0","steps":[],"attachments":[{"uid":"5dd688718d521bfb","name":"log","source":"5dd688718d521bfb.txt","type":"text/plain","size":2540}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"continuous_writes::0","time":{"start":1759544245114,"stop":1759544245952,"duration":838},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail::0","time":{"start":1759544245952,"stop":1759544245952,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"second_model::0","time":{"start":1759544901193,"stop":1759545024483,"duration":123290},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"first_model::0","time":{"start":1759545024484,"stop":1759545024484,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"juju::0","time":{"start":1759545024485,"stop":1759545024726,"duration":241},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"@pytest.mark.skipif(False, reason='Requires juju 3+')"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_async_replication"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"18402-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_async_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"894af42af89a75fd","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"history":{"statistic":{"failed":0,"broken":4,"skipped":66,"passed":413,"unknown":19,"total":502},"items":[{"uid":"330ea50dee784076","reportUrl":"../3302//#testresult/330ea50dee784076","status":"passed","time":{"start":1759457068462,"stop":1759457087863,"duration":19401}},{"uid":"c1967e43b981deaf","reportUrl":"../3299//#testresult/c1967e43b981deaf","status":"passed","time":{"start":1759370896241,"stop":1759370915587,"duration":19346}},{"uid":"c63d99ad0a52234b","reportUrl":"../3296//#testresult/c63d99ad0a52234b","status":"passed","time":{"start":1759284463073,"stop":1759284483851,"duration":20778}},{"uid":"1154ca5fd57a6798","reportUrl":"../3288//#testresult/1154ca5fd57a6798","status":"passed","time":{"start":1759197174817,"stop":1759197194920,"duration":20103}},{"uid":"23776e809ba5917","reportUrl":"../3287//#testresult/23776e809ba5917","status":"passed","time":{"start":1759110319520,"stop":1759110338440,"duration":18920}},{"uid":"a1d20525f31482e1","reportUrl":"../3286//#testresult/a1d20525f31482e1","status":"passed","time":{"start":1759026115618,"stop":1759026139131,"duration":23513}},{"uid":"c1b8862b862bfd7c","reportUrl":"../3285//#testresult/c1b8862b862bfd7c","status":"passed","time":{"start":1758937277578,"stop":1758937296242,"duration":18664}},{"uid":"444482a097189295","reportUrl":"../3283//#testresult/444482a097189295","status":"passed","time":{"start":1758853749933,"stop":1758853768496,"duration":18563}},{"uid":"e8758f4401faaac6","reportUrl":"../3277//#testresult/e8758f4401faaac6","status":"passed","time":{"start":1758765328378,"stop":1758765336775,"duration":8397}},{"uid":"e2c0d0202604fce0","reportUrl":"../3271//#testresult/e2c0d0202604fce0","status":"passed","time":{"start":1758680373312,"stop":1758680381684,"duration":8372}},{"uid":"81d62e8aacb549d1","reportUrl":"../3262//#testresult/81d62e8aacb549d1","status":"passed","time":{"start":1758596062491,"stop":1758596070864,"duration":8373}},{"uid":"ee3ee4de543852e6","reportUrl":"../3255//#testresult/ee3ee4de543852e6","status":"passed","time":{"start":1758506662166,"stop":1758506670546,"duration":8380}},{"uid":"5298ad0de38a7e60","reportUrl":"../3254//#testresult/5298ad0de38a7e60","status":"passed","time":{"start":1758419742837,"stop":1758419751196,"duration":8359}},{"uid":"7ad0384c9c331d93","reportUrl":"../3253//#testresult/7ad0384c9c331d93","status":"passed","time":{"start":1758333322447,"stop":1758333330838,"duration":8391}},{"uid":"392f5b6760d6b296","reportUrl":"../3252//#testresult/392f5b6760d6b296","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1758250996390,"stop":1758250996390,"duration":0}},{"uid":"16dd0de58a6a1f76","reportUrl":"../3250//#testresult/16dd0de58a6a1f76","status":"passed","time":{"start":1758162082418,"stop":1758162090809,"duration":8391}},{"uid":"7e5d33ffdce60cca","reportUrl":"../3244//#testresult/7e5d33ffdce60cca","status":"passed","time":{"start":1758073164207,"stop":1758073172570,"duration":8363}},{"uid":"90f5fd13cfd8be5","reportUrl":"../3240//#testresult/90f5fd13cfd8be5","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1757988256197,"stop":1757988256197,"duration":0}},{"uid":"c42f4644a4b0bf55","reportUrl":"../3239//#testresult/c42f4644a4b0bf55","status":"skipped","statusDetails":"XFAIL reason: aborted\n\n_pytest.outcomes.XFailed: aborted","time":{"start":1757901607617,"stop":1757901607617,"duration":0}},{"uid":"dd76b3c77c160c76","reportUrl":"../3238//#testresult/dd76b3c77c160c76","status":"passed","time":{"start":1757815257999,"stop":1757815267469,"duration":9470}}]},"tags":["abort_on_fail","@pytest.mark.skipif(False, reason='Requires juju 3+')"]},"source":"5075bfe5013e0723.json","parameterValues":[]}