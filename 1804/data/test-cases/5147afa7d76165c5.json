{"uid":"5147afa7d76165c5","name":"test_kill_db_process","fullName":"tests.integration.high_availability.test_self_healing#test_kill_db_process","historyId":"cf89d21b60cb6eab4b436c583b096289","time":{"start":1712798939878,"stop":1712798982528,"duration":42650},"description":"Test to send a SIGKILL to the primary db process and ensure that the cluster self heals.","descriptionHtml":"<p>Test to send a SIGKILL to the primary db process and ensure that the cluster self heals.</p>\n","status":"broken","statusMessage":"juju.errors.JujuAppError: App in error: mysql-k8s","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_self_healing.py\", line 53, in test_kill_db_process\n    mysql_application_name, _ = await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 299, in high_availability_test_setup\n    await relate_mysql_and_application(ops_test, mysql_application_name, application_name)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 230, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2751, in wait_for_idle\n    _raise_for_status(errors, \"error\")\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2657, in _raise_for_status\n    raise error_type(\"{}{} in {}: {}\".format(\njuju.errors.JujuAppError: App in error: mysql-k8s","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"ops_test","time":{"start":1712798926985,"stop":1712798927217,"duration":232},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop","time":{"start":1712798926985,"stop":1712798926985,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1712798926985,"stop":1712798926985,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1712798939877,"stop":1712798939877,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"continuous_writes","time":{"start":1712798939878,"stop":1712798939878,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to send a SIGKILL to the primary db process and ensure that the cluster self heals.","status":"broken","statusMessage":"juju.errors.JujuAppError: App in error: mysql-k8s","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 433, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 112, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 155, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 108, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 80, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 532, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_self_healing.py\", line 53, in test_kill_db_process\n    mysql_application_name, _ = await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 299, in high_availability_test_setup\n    await relate_mysql_and_application(ops_test, mysql_application_name, application_name)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 230, in relate_mysql_and_application\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2751, in wait_for_idle\n    _raise_for_status(errors, \"error\")\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2657, in _raise_for_status\n    raise error_type(\"{}{} in {}: {}\".format(\njuju.errors.JujuAppError: App in error: mysql-k8s","steps":[],"attachments":[{"uid":"249975faf137ed96","name":"log","source":"249975faf137ed96.txt","type":"text/plain","size":411}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1712798982529,"stop":1712798982529,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1712798982549,"stop":1712798983240,"duration":691},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1712798983241,"stop":1712798983242,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1712798983242,"stop":1712798983242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1712798983242,"stop":1712798983242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_self_healing"},{"name":"host","value":"fv-az1426-681"},{"name":"thread","value":"12416-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_self_healing"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":8,"skipped":0,"passed":56,"unknown":0,"total":67},"items":[{"uid":"48e02fbbd8e8d578","reportUrl":"../1801//#testresult/48e02fbbd8e8d578","status":"passed","time":{"start":1712712677333,"stop":1712712767433,"duration":90100}},{"uid":"d681ed66b3df0681","reportUrl":"../1793//#testresult/d681ed66b3df0681","status":"passed","time":{"start":1712626246160,"stop":1712626338317,"duration":92157}},{"uid":"d4397b024f270d52","reportUrl":"../1787//#testresult/d4397b024f270d52","status":"passed","time":{"start":1712539821385,"stop":1712539911566,"duration":90181}},{"uid":"a0f7a03593e58b46","reportUrl":"../1786//#testresult/a0f7a03593e58b46","status":"passed","time":{"start":1712453432413,"stop":1712453523582,"duration":91169}},{"uid":"4404625cb60be0b8","reportUrl":"../1785//#testresult/4404625cb60be0b8","status":"passed","time":{"start":1712367022297,"stop":1712367112532,"duration":90235}},{"uid":"eee902167febce02","reportUrl":"../1782//#testresult/eee902167febce02","status":"passed","time":{"start":1712280620919,"stop":1712280716040,"duration":95121}},{"uid":"3bac79c960a724b6","reportUrl":"../1778//#testresult/3bac79c960a724b6","status":"passed","time":{"start":1712194252762,"stop":1712194341692,"duration":88930}},{"uid":"8358e9a4f51dfcfe","reportUrl":"../1775//#testresult/8358e9a4f51dfcfe","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: mysql-k8s","time":{"start":1712107631583,"stop":1712107672668,"duration":41085}},{"uid":"9e005a9c2ac03afc","reportUrl":"../1773//#testresult/9e005a9c2ac03afc","status":"passed","time":{"start":1712021479438,"stop":1712021570838,"duration":91400}},{"uid":"9960093241a3880d","reportUrl":"../1772//#testresult/9960093241a3880d","status":"passed","time":{"start":1711935024135,"stop":1711935113295,"duration":89160}},{"uid":"826131c0207eb2b3","reportUrl":"../1770//#testresult/826131c0207eb2b3","status":"passed","time":{"start":1711848659444,"stop":1711848751795,"duration":92351}},{"uid":"d87cd50769ef9e75","reportUrl":"../1769//#testresult/d87cd50769ef9e75","status":"passed","time":{"start":1711762168212,"stop":1711762257416,"duration":89204}},{"uid":"dc9fce813966b65c","reportUrl":"../1767//#testresult/dc9fce813966b65c","status":"passed","time":{"start":1711675855027,"stop":1711675946211,"duration":91184}},{"uid":"96ae4705cc6c03e6","reportUrl":"../1763//#testresult/96ae4705cc6c03e6","status":"passed","time":{"start":1711589417860,"stop":1711589508135,"duration":90275}},{"uid":"e02244da757ea53","reportUrl":"../1759//#testresult/e02244da757ea53","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: mysql-k8s","time":{"start":1711502862026,"stop":1711502899831,"duration":37805}},{"uid":"acb078d9c2d37444","reportUrl":"../1756//#testresult/acb078d9c2d37444","status":"passed","time":{"start":1711416619688,"stop":1711416726225,"duration":106537}},{"uid":"fec9d7f4ee3308e7","reportUrl":"../1750//#testresult/fec9d7f4ee3308e7","status":"broken","statusDetails":"juju.errors.JujuAppError: App in error: mysql-k8s","time":{"start":1711330132775,"stop":1711330174046,"duration":41271}},{"uid":"b9b51170cdc4fc7c","reportUrl":"../1749//#testresult/b9b51170cdc4fc7c","status":"passed","time":{"start":1711243840715,"stop":1711243929963,"duration":89248}},{"uid":"1caf10395c45e80b","reportUrl":"../1748//#testresult/1caf10395c45e80b","status":"passed","time":{"start":1711157378658,"stop":1711157467813,"duration":89155}},{"uid":"fb3b304cba39ab9","reportUrl":"../1745//#testresult/fb3b304cba39ab9","status":"passed","time":{"start":1711071017459,"stop":1711071106638,"duration":89179}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"5147afa7d76165c5.json","parameterValues":[]}