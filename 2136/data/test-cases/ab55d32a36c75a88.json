{"uid":"ab55d32a36c75a88","name":"test_build_and_deploy","fullName":"tests.integration.high_availability.test_replication#test_build_and_deploy","historyId":"afe418e4ae935fa7b2e00a1102fd39ca","time":{"start":1722562690952,"stop":1722563591668,"duration":900716},"description":"Simple test to ensure that the mysql and application charms get deployed.","descriptionHtml":"<p>Simple test to ensure that the mysql and application charms get deployed.</p>\n","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_replication.py\", line 38, in test_build_and_deploy\n    await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 297, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 166, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2969, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1722562690671,"stop":1722562690671,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1722562690672,"stop":1722562690672,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1722562690672,"stop":1722562690951,"duration":279},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1722562690952,"stop":1722562690952,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Simple test to ensure that the mysql and application charms get deployed.","status":"broken","statusMessage":"asyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/test_replication.py\", line 38, in test_build_and_deploy\n    await high_availability_test_setup(ops_test)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 297, in high_availability_test_setup\n    mysql_application_name = await deploy_and_scale_mysql(ops_test)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 166, in deploy_and_scale_mysql\n    await ops_test.model.wait_for_idle(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/juju/model.py\", line 2969, in wait_for_idle\n    raise jasyncio.TimeoutError(\"Timed out waiting for model:\\n\" + busy)\nasyncio.exceptions.TimeoutError: Timed out waiting for model:\nmysql-k8s/0 [idle] unknown: \n  mysql-k8s/1 [idle] unknown: \n  mysql-k8s/2 [idle] unknown:","steps":[],"attachments":[{"uid":"ae33843ce5c90e6b","name":"log","source":"ae33843ce5c90e6b.txt","type":"text/plain","size":5017}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1722563591716,"stop":1722563591716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1722563591726,"stop":1722563592076,"duration":350},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1722563592077,"stop":1722563592077,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1722563592077,"stop":1722563592077,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1722563592077,"stop":1722563592077,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration.high_availability"},{"name":"suite","value":"test_replication"},{"name":"host","value":"fv-az1269-474"},{"name":"thread","value":"12621-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.high_availability.test_replication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"403e14dae0089ab9","status":"unknown","time":{}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":4,"skipped":6,"passed":167,"unknown":0,"total":177},"items":[{"uid":"c17423e0aaedb3c0","reportUrl":"../2134//#testresult/c17423e0aaedb3c0","status":"passed","time":{"start":1722476009039,"stop":1722476195640,"duration":186601}},{"uid":"c099b54277d35c56","reportUrl":"../2128//#testresult/c099b54277d35c56","status":"passed","time":{"start":1722389497457,"stop":1722389680795,"duration":183338}},{"uid":"fa09007ada7fbbd6","reportUrl":"../2126//#testresult/fa09007ada7fbbd6","status":"passed","time":{"start":1722303186540,"stop":1722303378792,"duration":192252}},{"uid":"587e2aa6a5b88d23","reportUrl":"../2121//#testresult/587e2aa6a5b88d23","status":"passed","time":{"start":1722216820899,"stop":1722217010506,"duration":189607}},{"uid":"93d12699cd7102c6","reportUrl":"../2120//#testresult/93d12699cd7102c6","status":"passed","time":{"start":1722130485550,"stop":1722130669595,"duration":184045}},{"uid":"ff122f2d38c98b5c","reportUrl":"../2119//#testresult/ff122f2d38c98b5c","status":"passed","time":{"start":1722043918487,"stop":1722044096699,"duration":178212}},{"uid":"c5e0b16d96f76cc7","reportUrl":"../2112//#testresult/c5e0b16d96f76cc7","status":"passed","time":{"start":1721957617250,"stop":1721957797809,"duration":180559}},{"uid":"b1332439798b7dfd","reportUrl":"../2105//#testresult/b1332439798b7dfd","status":"passed","time":{"start":1721871133296,"stop":1721871318638,"duration":185342}},{"uid":"5341819ee947c59f","reportUrl":"../2103//#testresult/5341819ee947c59f","status":"passed","time":{"start":1721785255805,"stop":1721785431007,"duration":175202}},{"uid":"420c33609c55a6ad","reportUrl":"../2101//#testresult/420c33609c55a6ad","status":"passed","time":{"start":1721698803117,"stop":1721698998936,"duration":195819}},{"uid":"b3f94eabfe27543c","reportUrl":"../2095//#testresult/b3f94eabfe27543c","status":"passed","time":{"start":1721612011011,"stop":1721612199916,"duration":188905}},{"uid":"3c2e18216b4e761f","reportUrl":"../2094//#testresult/3c2e18216b4e761f","status":"passed","time":{"start":1721525527906,"stop":1721525718350,"duration":190444}},{"uid":"cee5e916857e8739","reportUrl":"../2093//#testresult/cee5e916857e8739","status":"passed","time":{"start":1721439160371,"stop":1721439335889,"duration":175518}},{"uid":"cdcd151525c0192e","reportUrl":"../2087//#testresult/cdcd151525c0192e","status":"passed","time":{"start":1721356474553,"stop":1721356652889,"duration":178336}},{"uid":"20caa75740749967","reportUrl":"../2082//#testresult/20caa75740749967","status":"passed","time":{"start":1721266473852,"stop":1721266658209,"duration":184357}},{"uid":"ecbee22bb5c6da27","reportUrl":"../2079//#testresult/ecbee22bb5c6da27","status":"passed","time":{"start":1721180231656,"stop":1721180419520,"duration":187864}},{"uid":"7e192701ba730d8a","reportUrl":"../2077//#testresult/7e192701ba730d8a","status":"passed","time":{"start":1721093602002,"stop":1721093784409,"duration":182407}},{"uid":"b3d48e792f8a14ec","reportUrl":"../2071//#testresult/b3d48e792f8a14ec","status":"passed","time":{"start":1721007447534,"stop":1721007626483,"duration":178949}},{"uid":"56feb47ba2fb1f8d","reportUrl":"../2070//#testresult/56feb47ba2fb1f8d","status":"passed","time":{"start":1720920975386,"stop":1720921159687,"duration":184301}},{"uid":"953298f72ccdb52","reportUrl":"../2069//#testresult/953298f72ccdb52","status":"passed","time":{"start":1720834412366,"stop":1720834592446,"duration":180080}}]},"tags":["asyncio","group(1)"]},"source":"ab55d32a36c75a88.json","parameterValues":[]}