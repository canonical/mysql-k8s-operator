{"uid":"be67d24862caa611","name":"test_backup","fullName":"tests.integration.test_backup_gcp#test_backup","historyId":"99bd7826d689490f17434b604016ea40","time":{"start":1722563575573,"stop":1722563576596,"duration":1023},"description":"Test to create a backup and list backups.","descriptionHtml":"<p>Test to create a backup and list backups.</p>\n","status":"failed","statusMessage":"AssertionError","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/test_backup_gcp.py\", line 126, in test_backup\n    value_before_backup = await insert_data_into_mysql_and_validate_replication(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 388, in insert_data_into_mysql_and_validate_replication\n    primary = await get_primary_unit(ops_test, mysql_units[0], mysql_application_name)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/helpers.py\", line 146, in get_primary_unit\n    cluster_status = await get_cluster_status(unit)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/helpers.py\", line 79, in get_cluster_status\n    results = await juju_.run_action(unit, \"get-cluster-status\")\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/juju_.py\", line 24, in run_action\n    assert result.results.get(\"return-code\") == 0\nAssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"event_loop","time":{"start":1722562674813,"stop":1722562674814,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cloud_configs","time":{"start":1722562674814,"stop":1722562674814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"github_secrets","time":{"start":1722562674814,"stop":1722562674814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test","time":{"start":1722562674814,"stop":1722562675102,"duration":288},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets","time":{"start":1722562674814,"stop":1722562674814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"cloud_credentials","time":{"start":1722562674814,"stop":1722562674814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"tmp_path_factory","time":{"start":1722562674814,"stop":1722562674814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"abort_on_fail","time":{"start":1722563575573,"stop":1722563575573,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Test to create a backup and list backups.","status":"failed","statusMessage":"AssertionError","statusTrace":"Traceback (most recent call last):\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 341, in from_call\n    result: Optional[TResult] = func()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 262, in <lambda>\n    lambda: ihook(item=item, **kwds), when=when, reraise=reraise\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 177, in pytest_runtest_call\n    raise e\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/runner.py\", line 169, in pytest_runtest_call\n    item.runtest()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 1792, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_hooks.py\", line 513, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_manager.py\", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 182, in _multicall\n    return outcome.get_result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_result.py\", line 100, in get_result\n    raise exc.with_traceback(exc.__traceback__)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/_pytest/python.py\", line 194, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/.tox/integration/lib/python3.10/site-packages/pytest_asyncio/plugin.py\", line 529, in inner\n    _loop.run_until_complete(task)\n  File \"/usr/lib/python3.10/asyncio/base_events.py\", line 649, in run_until_complete\n    return future.result()\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/test_backup_gcp.py\", line 126, in test_backup\n    value_before_backup = await insert_data_into_mysql_and_validate_replication(\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/high_availability/high_availability_helpers.py\", line 388, in insert_data_into_mysql_and_validate_replication\n    primary = await get_primary_unit(ops_test, mysql_units[0], mysql_application_name)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/helpers.py\", line 146, in get_primary_unit\n    cluster_status = await get_cluster_status(unit)\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/helpers.py\", line 79, in get_cluster_status\n    results = await juju_.run_action(unit, \"get-cluster-status\")\n  File \"/home/runner/work/mysql-k8s-operator/mysql-k8s-operator/tests/integration/juju_.py\", line 24, in run_action\n    assert result.results.get(\"return-code\") == 0\nAssertionError","steps":[],"attachments":[{"uid":"b21b74dfac30766a","name":"log","source":"b21b74dfac30766a.txt","type":"text/plain","size":98}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"abort_on_fail::0","time":{"start":1722563576598,"stop":1722563576598,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"ops_test::finalizer","time":{"start":1722563576603,"stop":1722563576950,"duration":347},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::2","time":{"start":1722563576950,"stop":1722563576951,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clean_backups_from_buckets::0","time":{"start":1722563576951,"stop":1722563577218,"duration":267},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_close_event_loop","time":{"start":1722563576951,"stop":1722563576951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"event_loop::_provide_clean_event_loop","time":{"start":1722563576951,"stop":1722563576951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"abort_on_fail"},{"name":"tag","value":"group(1)"},{"name":"tag","value":"asyncio"},{"name":"parentSuite","value":"tests.integration"},{"name":"suite","value":"test_backup_gcp"},{"name":"host","value":"fv-az973-948"},{"name":"thread","value":"12619-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration.test_backup_gcp"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c0f968da7c68eeb5","status":"unknown","time":{}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":26,"unknown":0,"total":27},"items":[{"uid":"6ba164ee4fd12100","reportUrl":"../2134//#testresult/6ba164ee4fd12100","status":"passed","time":{"start":1722476136740,"stop":1722476199521,"duration":62781}},{"uid":"dddae49ca6c37bad","reportUrl":"../2128//#testresult/dddae49ca6c37bad","status":"passed","time":{"start":1722389608623,"stop":1722389653968,"duration":45345}},{"uid":"c8041b9f81420d79","reportUrl":"../2126//#testresult/c8041b9f81420d79","status":"passed","time":{"start":1722303325342,"stop":1722303371758,"duration":46416}},{"uid":"705a6f8f45ff082","reportUrl":"../2121//#testresult/705a6f8f45ff082","status":"passed","time":{"start":1722216955956,"stop":1722217006852,"duration":50896}},{"uid":"27126b5586418ec8","reportUrl":"../2120//#testresult/27126b5586418ec8","status":"passed","time":{"start":1722130591986,"stop":1722130644837,"duration":52851}},{"uid":"6ed60c5653c6063d","reportUrl":"../2119//#testresult/6ed60c5653c6063d","status":"passed","time":{"start":1722044038661,"stop":1722044088487,"duration":49826}},{"uid":"ef77fdffd87555af","reportUrl":"../2112//#testresult/ef77fdffd87555af","status":"passed","time":{"start":1721957705560,"stop":1721957757659,"duration":52099}},{"uid":"833e1596f3ef2e6","reportUrl":"../2105//#testresult/833e1596f3ef2e6","status":"passed","time":{"start":1721871250487,"stop":1721871299391,"duration":48904}},{"uid":"502de16d62d7f0a4","reportUrl":"../2103//#testresult/502de16d62d7f0a4","status":"passed","time":{"start":1721785376179,"stop":1721785427089,"duration":50910}},{"uid":"7ed00b777cbac426","reportUrl":"../2101//#testresult/7ed00b777cbac426","status":"passed","time":{"start":1721698929298,"stop":1721698978681,"duration":49383}},{"uid":"ae83cc1fc88a14ed","reportUrl":"../2095//#testresult/ae83cc1fc88a14ed","status":"passed","time":{"start":1721612095985,"stop":1721612146864,"duration":50879}},{"uid":"e6b9b8084e3d1bf8","reportUrl":"../2094//#testresult/e6b9b8084e3d1bf8","status":"passed","time":{"start":1721525636529,"stop":1721525686995,"duration":50466}},{"uid":"c258380ded18b5ab","reportUrl":"../2093//#testresult/c258380ded18b5ab","status":"passed","time":{"start":1721439254960,"stop":1721439307434,"duration":52474}},{"uid":"fcb36a1571ad2b33","reportUrl":"../2087//#testresult/fcb36a1571ad2b33","status":"passed","time":{"start":1721356616957,"stop":1721356668903,"duration":51946}},{"uid":"ba133ce38c013e4c","reportUrl":"../2082//#testresult/ba133ce38c013e4c","status":"passed","time":{"start":1721266594647,"stop":1721266654530,"duration":59883}},{"uid":"a320615f8484fa9","reportUrl":"../2079//#testresult/a320615f8484fa9","status":"passed","time":{"start":1721180340030,"stop":1721180390961,"duration":50931}},{"uid":"1a24c0c42491e3a7","reportUrl":"../2077//#testresult/1a24c0c42491e3a7","status":"passed","time":{"start":1721093729433,"stop":1721093779397,"duration":49964}},{"uid":"176124730b7f17c8","reportUrl":"../2071//#testresult/176124730b7f17c8","status":"passed","time":{"start":1721007544840,"stop":1721007596324,"duration":51484}},{"uid":"fa3bafe63c445407","reportUrl":"../2070//#testresult/fa3bafe63c445407","status":"passed","time":{"start":1720921102421,"stop":1720921148413,"duration":45992}},{"uid":"802dcb328b1d7733","reportUrl":"../2069//#testresult/802dcb328b1d7733","status":"passed","time":{"start":1720834553800,"stop":1720834595525,"duration":41725}}]},"tags":["asyncio","abort_on_fail","group(1)"]},"source":"be67d24862caa611.json","parameterValues":[]}